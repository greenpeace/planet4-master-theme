!function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t){!function(){e.exports=this.wp.element}()},function(e,t){!function(){e.exports=this.wp.components}()},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}e.exports=function(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),e}},function(e,t,n){var a=n(46);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}},function(e,t){function n(t){return e.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(t)}e.exports=n},function(e,t,n){var a=n(47),i=n(11);e.exports=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?i(e):t}},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){!function(){e.exports=this.wp.editor}()},function(e,t){!function(){e.exports=this.wp.i18n}()},function(e,t){!function(){e.exports=this.lodash}()},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){!function(){e.exports=this.wp.compose}()},function(e,t,n){var a=n(45);e.exports=function(e,t){if(null==e)return{};var n,i,o=a(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}},function(e,t){!function(){e.exports=this.wp.data}()},function(e,t,n){var a=n(44),i=n(43),o=n(42);e.exports=function(e){return a(e)||i(e)||o()}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var a=n(41),i=n(40),o=n(39);e.exports=function(e,t){return a(e)||i(e,t)||o()}},function(e,t,n){var a=n(16);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),i.forEach((function(t){a(e,t,n[t])}))}return e}},function(e,t,n){"use strict";var a={SLIDE_TRANSITION_SPEED:500,activeTransition:null,nextSlide:function(e){var t=$(e),n=t.next(".carousel-item");return n.length?n:t.prevAll(".carousel-item").last()},previousSlide:function(e){var t=$(e),n=t.prev(".carousel-item");return n.length?n:t.nextAll(".carousel-item").last()},switchIndicator:function(e){this.$CarouselIndicators.children().each((function(t,n){$(n).toggleClass("active",t===e)}))},setup:function(){var e=this;e.$CarouselHeaderWrapper=$("#carousel-wrapper-header"),e.$CarouselIndicators=e.$CarouselHeaderWrapper.find(".carousel-indicators"),e.$Slides=e.$CarouselHeaderWrapper.find(".carousel-item"),e.$CarouselHeaderWrapper.find("img").on("load",(function(){$(this).get(0).currentSrc!==$(this).parent().css("background-image").replace(/.*\s?url\(['"]?/,"").replace(/['"]?\).*/,"")&&$(this).parent().css("background-image","url("+$(this).get(0).currentSrc+")")})),e.$CarouselIndicators.find("li").remove(),e.$Slides.each((function(t,n){var a=$(n);$("<li>").attr("data-target","#carousel-wrapper-header").attr("data-slide-to",t).toggleClass("active",0===t).appendTo(e.$CarouselIndicators);var i=a.find("img"),o=i.get(0).currentSrc||i.attr("src");a.css("background-image","url("+o+")").css("background-position",i.data("background-position")),a.attr("data-slide",t)}));var t=".carousel-control-next";if("rtl"==$("html").attr("dir")&&(t+=", .carousel-control-prev"),e.$CarouselHeaderWrapper.on("click",t,(function(t){t.preventDefault(),e.advanceCarousel()})),e.$CarouselHeaderWrapper.on("click",".carousel-indicators li",(function(t){t.preventDefault(),e.activate($(t.target).data("slide-to"))})),$(".carousel-header").length>0&&e.$Slides.length>1){var n=$(".carousel-header")[0],a=new Hammer(n,{recognizers:[]}),i=new Hammer.Manager(a.element),o=new Hammer.Swipe;i.add(o),i.on("swipeleft",(function(){e.advanceCarousel()})),i.on("swiperight",(function(){e.backwardsCarousel()})),i.on("swipeup",(function(e){var t=$(window).scrollTop();e.preventDefault(),$("html, body").animate({scrollTop:t+200})})),i.on("swipedown",(function(e){var t=$(window).scrollTop();e.preventDefault(),$("html, body").animate({scrollTop:t-200})}))}e.$Slides.each((function(t,n){var a=$(n),i=e.nextSlide(a).find("img");if(i.length>0){var o=$("<div>").addClass("carousel-preview-wrap").prependTo(a),r=i.get(0).currentSrc||i.attr("src");$("<div>").addClass("carousel-preview").css("background-image","url("+r+")").css("background-position",i.data("background-position")).appendTo(o)}}))},backwardsCarousel:function(){var e=this.$Slides.filter(".active"),t=this.previousSlide(e);this.activate(t.data("slide"))},activate:function(e){var t=this,n=t.$Slides.eq(e);n.hasClass("active")&&!n.hasClass("slide-over")||("full-width-classic"!=t.$CarouselHeaderWrapper.data("block-style")&&n.hasClass("next")?t.advanceCarousel():(t.activeTransition&&clearTimeout(t.activeTransition),t.switchIndicator(e),t.$Slides.removeClass("active next slide-over fade-out"),n.addClass("active"),t.nextSlide(n).addClass("next")))},advanceCarousel:function(){var e=this,t=e.$Slides.filter(".active");e.$Slides.removeClass("next");var n=e.nextSlide(t).addClass("next");if(e.activeTransition)return clearTimeout(e.activeTransition),e.activeTransition=null,e.$Slides.removeClass("fade-out slide-over active"),n.addClass("active"),e.nextSlide(n).addClass("next"),void e.advanceCarousel();t.addClass("slide-over"),e.switchIndicator(e.$Slides.index(n)),e.activeTransition=setTimeout((function(){t.addClass("fade-out"),e.activeTransition=setTimeout((function(){t.removeClass("active"),e.$Slides.removeClass("slide-over fade-out"),n.removeClass("next").addClass("active"),e.nextSlide(n).addClass("next"),e.activeTransition=null}),e.SLIDE_TRANSITION_SPEED/2)}),e.SLIDE_TRANSITION_SPEED)}},i={nextSlide:function(e){var t=$(e),n=t.next(".carousel-item");return n.length?n:t.prevAll(".carousel-item").last()},previousSlide:function(e){var t=$(e),n=t.prev(".carousel-item");return n.length?n:t.nextAll(".carousel-item").last()},switchIndicator:function(e){this.$CarouselIndicators.children().each((function(t,n){$(n).toggleClass("active",t===e)}))},getCurrentSlideIndex:function(){return this.$CarouselHeaderWrapper.find(".carousel-item.active").index()},setup:function(){var e=this;e.isRTL="rtl"==$("html").attr("dir"),e.$CarouselHeaderWrapper=$("#carousel-wrapper-header"),e.$Slides=e.$CarouselHeaderWrapper.find(".carousel-item"),e.$CarouselHeaderWrapper.find("img").on("load",(function(){$(this).get(0).currentSrc!==$(this).parent().css("background-image").replace(/.*\s?url\(['"]?/,"").replace(/['"]?\).*/,"")&&$(this).parent().css("background-image","url("+$(this).get(0).currentSrc+")")})),e.$CarouselIndicators=e.$CarouselHeaderWrapper.find(".carousel-indicators"),e.$CarouselIndicators.find("li").remove(),e.$Slides.each((function(t,n){var a=$(n);$("<li>").attr("data-target","#carousel-wrapper-header").attr("data-slide-to",t).toggleClass("active",0===t).appendTo(e.$CarouselIndicators);var i=a.find("img");i.hasClass("preload")&&(window.lazyLoad||(window.lazyLoad=new LazyLoad({elements_selector:".lazyload"})),window.lazyLoad.load(i[0]));var o=i.get(0).currentSrc||i.attr("src");a.find(".background-holder").css("background-image","url("+o+")").css("background-position",i.data("background-position")),a.attr("data-slide",t)}));var t=[".carousel-control-next",".carousel-control-prev"];if(e.isRTL&&t.reverse(),e.$CarouselHeaderWrapper.on("click",t[0],(function(t){t.preventDefault(),e.cancelAutoplayInterval(),e.slideToNext()})),e.$CarouselHeaderWrapper.on("click",t[1],(function(t){t.preventDefault(),e.cancelAutoplayInterval(),e.slideToPrevious()})),e.$CarouselHeaderWrapper.on("click",".carousel-indicators li",(function(t){t.preventDefault(),e.cancelAutoplayInterval(),e.activate($(t.target).data("slide-to"))})),$(".carousel-header_full-width-classic").length>0&&e.$Slides.length>1){var n=$(".carousel-header_full-width-classic")[0],a=new Hammer(n,{recognizers:[]}),i=new Hammer.Manager(a.element),o=new Hammer.Swipe;i.add(o);var r=[function(){e.slideToNext(),e.cancelAutoplayInterval()},function(){e.cancelAutoplayInterval(),e.slideToPrevious()}];e.isRTL&&r.reverse(),i.on("swipeleft",r[0]),i.on("swiperight",r[1]),i.on("swipeup",(function(e){var t=$(window).scrollTop();e.preventDefault(),$("html, body").animate({scrollTop:t+200})})),i.on("swipedown",(function(e){var t=$(window).scrollTop();e.preventDefault(),$("html, body").animate({scrollTop:t-200})}))}e.positionIndicators(),e.setCarouselHeight(e.$Slides.first()),e.$CarouselHeaderWrapper.find(".initial").on("transitionend",(function(){$(this).removeClass("initial")})),$(window).on("resize",(function(){var t=$(".carousel-item.active");e.setCarouselHeight(t),e.positionIndicators()})),e.autoplayPaused=!1,e.autoplayEnabled=1==e.$CarouselHeaderWrapper.data("carousel-autoplay"),e.$Slides.length>1&&e.autoplayEnabled&&(e.startAutoplayInterval(),e.$CarouselHeaderWrapper.on("mouseenter",(function(){e.autoplayPaused=!0})),e.$CarouselHeaderWrapper.on("mouseleave",(function(){e.autoplayPaused=!1}))),$(window).on("scroll",(function(){e.cancelAutoplayInterval(),$(window).off("scroll")}))},startAutoplayInterval:function(){var e=this;e.autoplayInterval=window.setInterval((function(){e.autoplayPaused||e.slideToNext()}),6e3)},cancelAutoplayInterval:function(){window.clearInterval(this.autoplayInterval)},activate:function(e){var t=this.$Slides.eq(e),n=this.getCurrentSlideIndex();e!=n&&(e>n?this.slideToNext(t):this.slideToPrevious(t))},positionIndicators:function(){var e=this.$CarouselHeaderWrapper.find(".carousel-indicators"),t=this.$CarouselHeaderWrapper.find(".carousel-item.active .action-button"),n=window.matchMedia("(min-width: 992px)").matches,a=window.matchMedia("(min-width: 768px) and (max-width: 992px)").matches,i=window.matchMedia("(min-width: 768px)").matches,o=n&&this.isRTL||a&&!this.isRTL;if(i&&t.length){var r=t.offset().left;if(o){var l=r+(this.isRTL?t.width():t.parent().width()),s=$(window).width()-l;e.css("right",s+"px").css("left","").css("margin-left","0").css("margin-right","3px")}else r=this.isRTL?t.parent().offset().left:t.offset().left,e.css("left",r+"px").css("right","").css("margin-right","0").css("margin-left","3px")}else e.css("right",""),e.css("left","")},getSlideHeight:function(e){return e.find(".carousel-item-mask .background-holder").outerHeight()+e.find(".carousel-caption").outerHeight()+"px"},setCarouselHeight:function(e){window.matchMedia("(max-width: 992px)").matches?this.$CarouselHeaderWrapper.find(".carousel-inner, .carousel-item-mask").css("height",this.getSlideHeight(e)):this.$CarouselHeaderWrapper.find(".carousel-inner, .carousel-item-mask").css("height","")},slideToPrevious:function(e){var t=this,n=t.$Slides.filter(".active"),a=t.isRTL?"shrink-to-left":"shrink-to-right",i=null;i=e||t.previousSlide(n),n.addClass(a),i.addClass("prev"),t.setCarouselHeight(i),n.on("transitionend",(function(){n.removeClass("".concat(a," active")),i.addClass("active").removeClass("prev"),n.off("transitionend")})),t.switchIndicator(t.$Slides.index(i))},getActiveSlide:function(){return this.$Slides.filter(".active")},slideToNext:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this,n=t.getActiveSlide(),a=t.isRTL?"shrink-to-right":"shrink-to-left";function i(){n.removeClass("".concat(a," active")),e.addClass("active").removeClass("next"),n.off("transitionend")}e||(e=t.nextSlide(n)),n.addClass(a),e.addClass("next"),n.on("transitionend",i),n.find(".btn").fadeIn(),t.setCarouselHeight(e),t.switchIndicator(t.$Slides.index(e))}};n.d(t,"a",(function(){return o}));var o=function(){var e=$("#carousel-wrapper-header");if(e.length>0)switch(e.data("block-style")){case"full-width-classic":i.setup();break;default:a.setup()}}},function(e,t,n){var a;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var r=i.apply(null,a);r&&e.push(r)}else if("object"===o)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}void 0!==e&&e.exports?(i.default=i,e.exports=i):void 0===(a=function(){return i}.apply(t,[]))||(e.exports=a)}()},function(e,t){!function(){e.exports=this.wp.editPost}()},function(e,t){!function(){e.exports=this.wp.isShallowEqual}()},function(e,t){!function(){e.exports=this.wp.plugins}()},function(e,t){!function(){e.exports=this.wp.url}()},function(e,t){!function(){e.exports=this.wp.apiFetch}()},function(e,t){var n=9007199254740991,a="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",r=/^(?:0|[1-9]\d*)$/;function l(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var s,c,u=Object.prototype,p=u.hasOwnProperty,d=u.toString,m=u.propertyIsEnumerable,h=(s=Object.keys,c=Object,function(e){return s(c(e))}),g=Math.max,b=!m.call({valueOf:1},"valueOf");function f(e,t){var n=C(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&O(e)}(e)&&p.call(e,"callee")&&(!m.call(e,"callee")||d.call(e)==a)}(e)?function(e,t){for(var n=-1,a=Array(e);++n<e;)a[n]=t(n);return a}(e.length,String):[],i=n.length,o=!!i;for(var r in e)!t&&!p.call(e,r)||o&&("length"==r||_(r,i))||n.push(r);return n}function v(e,t,n){var a=e[t];p.call(e,t)&&k(a,n)&&(void 0!==n||t in e)||(e[t]=n)}function _(e,t){return!!(t=null==t?n:t)&&("number"==typeof e||r.test(e))&&e>-1&&e%1==0&&e<t}function y(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||u)}function k(e,t){return e===t||e!=e&&t!=t}var C=Array.isArray;function O(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=n}(e.length)&&!function(e){var t=E(e)?d.call(e):"";return t==i||t==o}(e)}function E(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var j,w=(j=function(e,t){if(b||y(t)||O(t))!function(e,t,n,a){n||(n={});for(var i=-1,o=t.length;++i<o;){var r=t[i],l=a?a(n[r],e[r],r,n,e):void 0;v(n,r,void 0===l?e[r]:l)}}(t,function(e){return O(e)?f(e):function(e){if(!y(e))return h(e);var t=[];for(var n in Object(e))p.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}(t),e);else for(var n in t)p.call(t,n)&&v(e,n,t[n])},function(e,t){return t=g(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,i=g(n.length-t,0),o=Array(i);++a<i;)o[a]=n[t+a];a=-1;for(var r=Array(t+1);++a<t;)r[a]=n[a];return r[t]=o,l(e,this,r)}}((function(e,t){var n=-1,a=t.length,i=a>1?t[a-1]:void 0,o=a>2?t[2]:void 0;for(i=j.length>3&&"function"==typeof i?(a--,i):void 0,o&&function(e,t,n){if(!E(n))return!1;var a=typeof t;return!!("number"==a?O(n)&&_(t,n.length):"string"==a&&t in n)&&k(n[t],e)}(t[0],t[1],o)&&(i=a<3?void 0:i,a=1),e=Object(e);++n<a;){var r=t[n];r&&j(e,r,n,i)}return e})));e.exports=w},function(e,t){!function(){e.exports=this.wp.blockEditor}()},function(e,t,n){"use strict";n.r(t);var a=n(7),i=n.n(a),o=n(2),r=n.n(o),l=n(0),s=n(3),c=n.n(s),u=n(6),p=n.n(u),d=n(5),m=n.n(d),h=n(11),g=n.n(h),b=n(4),f=n.n(b),v=function(e){function t(){return r()(this,t),p()(this,m()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"render",value:function(){return Object(l.createElement)("div",{className:"Preview"},this.props.showBar?Object(l.createElement)("div",{className:"PreviewBar"},"Preview"):null,this.props.children)}}]),t}(l.Component),_=n(1),y=n(13),k=n.n(y),C=n(20),O=n.n(C),E=function(e){return function(t){function n(e){var t;return r()(this,n),(t=p()(this,m()(n).call(this,e))).state={charactersUsed:e.value?e.value.length:0},t.handleChange=t.handleChange.bind(g()(t)),t.updateCharactersUsed=t.updateCharactersUsed.bind(g()(t)),t}return f()(n,t),c()(n,[{key:"updateCharactersUsed",value:function(e){this.setState((function(){return{charactersUsed:e.length}}))}},{key:"handleChange",value:function(e){this.props.onChange&&this.props.onChange(e),this.updateCharactersUsed(e)}},{key:"shouldShowWarning",value:function(){return this.props.characterLimit&&!this.exceededLimit()&&this.props.characterLimit-this.state.charactersUsed<this.warningThreshold()}},{key:"warningThreshold",value:function(){var e=this.props.characterLimit/10;return 5*Math.ceil(e/5)}},{key:"exceededLimit",value:function(){return this.props.characterLimit&&this.state.charactersUsed>this.props.characterLimit}},{key:"showCounter",value:function(){return!!this.props.characterLimit}},{key:"render",value:function(){var t=this,n=this.props,a=n.characterLimit,o=(n.warningThreshold,n.onChange,k()(n,["characterLimit","warningThreshold","onChange"]));return Object(l.createElement)("div",{className:"counted-field-wrapper"},Object(l.createElement)(e,i()({onChange:this.handleChange},o)),this.showCounter()&&Object(l.createElement)("div",{className:O()("character-counter",{"character-limit-exceeded":t.exceededLimit(),"character-limit-warning":t.shouldShowWarning()})},Object(l.createElement)("span",null,this.state.charactersUsed),Object(l.createElement)("span",null,"/",a)))}}]),n}(l.Component)},j=wp.apiFetch,w=wp.url.addQueryArgs,S=E(_.TextControl),T=E(_.TextareaControl),x=function(e){function t(e){var n;r()(this,t),n=p()(this,m()(t).call(this,e));var a=e.tagsList.filter((function(t){return e.tags.includes(t.id)})).map((function(e){return e.name})),i=e.postTypesList.filter((function(t){return e.post_types.includes(t.id)})).map((function(e){return e.name}));return n.state={tagTokens:a,postTypeTokens:i,selectedPosts:[],postsSuggestions:null,overrideWasFocused:!1},n.getSuggestionsOnFirstFocus=n.getSuggestionsOnFirstFocus.bind(g()(n)),n}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.populatePostsToken()}},{key:"populatePostsToken",value:function(){var e=this;this.props.posts.length>0?j({path:w("/wp/v2/posts",{per_page:50,page:1,include:this.props.posts})}).then((function(t){var n=t.map((function(e){return e.title.rendered})),a=t.map((function(e){return{id:e.id,title:e.title.rendered}}));e.setState({postsTokens:n,postsList:a,postsSuggestions:[],selectedPosts:a})})):this.setState({postsTokens:[],postsList:[],postsSuggestions:[],selectedPosts:[]})}},{key:"getSuggestionsOnFirstFocus",value:function(e){var t,n=this;this.state.overrideWasFocused||(this.setState({overrideWasFocused:!0}),t="undefined"!=typeof icl_this_lang?{post_language:icl_this_lang}:{},j({path:w("/planet4/v1/all-published-posts",t)}).then((function(e){var t=e.map((function(e){return e.post_title})),a=e.map((function(e){return{id:e.id,title:e.post_title}}));n.setState({postsSuggestions:t,postsList:a})})))}},{key:"onSelectedTagsChange",value:function(e){var t=this,n=e.map((function(e){return t.props.tagsList.filter((function(t){return t.name===e}))[0].id}));this.props.onSelectedTagsChange(n),this.setState({tagTokens:e})}},{key:"onSelectedPostTypesChange",value:function(e){var t=this,n=e.map((function(e){return t.props.postTypesList.filter((function(t){return t.name===e}))[0].id}));this.props.onSelectedPostTypesChange(n),this.setState({postTypeTokens:e})}},{key:"onSelectedPostsChange",value:function(e){var t=this.state.postsList.filter((function(t){return e.includes(t.title)}));this.props.onSelectedPostsChange(t.map((function(e){return e.id}))),this.setState({postsTokens:e,selectedPosts:t})}},{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=this.props.tagsList.map((function(e){return e.name})),a=this.props.postTypesList.map((function(e){return e.name}));return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)(S,{label:t("Title","p4ge"),placeholder:t("Enter title","p4ge"),help:t("Your default is set to [ Latest Articles ]","p4ge"),value:this.props.article_heading,onChange:this.props.onTitleChange,characterLimit:40})),Object(l.createElement)("div",null,Object(l.createElement)(T,{label:t("Description","p4ge"),placeholder:t("Enter description","p4ge"),value:this.props.articles_description,onChange:this.props.onDescriptionChange,characterLimit:200})),Object(l.createElement)("div",null,Object(l.createElement)(S,{label:t("Button Text","p4ge"),placeholder:t("Override button text","p4ge"),help:t("Your default is set to [ Load More ]","p4ge"),value:this.props.read_more_text,onChange:this.props.onReadmoretextChange})),Object(l.createElement)("div",null,Object(l.createElement)(S,{label:t("Button Link","p4ge"),placeholder:t("Add read more button link","p4ge"),value:this.props.read_more_link,onChange:this.props.onReadmorelinkChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.CheckboxControl,{label:t("Open in a new Tab","p4ge"),help:t("Open button link in new tab","p4ge"),value:this.props.button_link_new_tab,checked:this.props.button_link_new_tab,onChange:function(t){return e.props.onButtonLinkTabChange(t)}})),"undefined"!==this.props.posts&&0===this.props.posts.length?Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)(S,{label:t("Articles count","p4ge"),help:t("Number of articles","p4ge"),type:"number",value:this.props.article_count,onChange:this.props.onCountChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.FormTokenField,{value:this.state.tagTokens,suggestions:n,label:t("Select Tags","p4ge"),onChange:function(t){return e.onSelectedTagsChange(t)}}),Object(l.createElement)("p",{className:"FieldHelp"},"Associate this block with Actions that have specific Tags")),Object(l.createElement)("div",null,Object(l.createElement)(_.FormTokenField,{value:this.state.postTypeTokens,suggestions:a,label:t("Post Types","p4ge"),onChange:function(t){return e.onSelectedPostTypesChange(t)}})),Object(l.createElement)("div",{className:"ignore-categories-wrapper"},Object(l.createElement)(_.CheckboxControl,{label:t("Ignore categories","p4ge"),help:t("Ignore categories when filtering posts to populate the content of this block","p4ge"),value:this.props.ignore_categories,checked:this.props.ignore_categories,onChange:function(t){return e.props.onIgnoreCategoriesChange(t)}}))):null,0===this.props.tags.length&&0===this.props.post_types.length&&Object(l.createElement)("div",null,Object(l.createElement)("hr",null),Object(l.createElement)("label",null,t("Manual override","p4ge")),Object(l.createElement)(_.FormTokenField,{value:this.state.postsTokens,suggestions:this.state.postsSuggestions,label:t("CAUTION: Adding articles individually will override the automatic functionality of this block. For good user experience, please include at least three articles so that spacing and alignment of the design remains in tact.","p4ge"),onFocus:this.getSuggestionsOnFirstFocus,onChange:function(t){return e.onSelectedPostsChange(t)},placeholder:"Select Posts",maxLength:"10",maxSuggestions:"20"})))}},{key:"render",value:function(){return Object(l.createElement)("div",null,!!this.props.isSelected&&this.renderEdit(),Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/articles",attributes:{read_more_text:this.props.read_more_text,read_more_link:this.props.read_more_link,tags:this.props.tags,post_types:this.props.post_types,posts:this.props.posts,article_heading:this.props.article_heading,articles_description:this.props.articles_description,article_count:this.props.article_count,ignore_categories:this.props.ignore_categories}})))}}]),t}(l.Component),L=function(e){function t(e){var n;return r()(this,t),(n=p()(this,m()(t).call(this,e))).state={selectedOption:e.selectedOption},n.setSelected=n.setSelected.bind(g()(n)),n}return f()(t,e),c()(t,[{key:"setSelected",value:function(e){this.setState({selectedOption:e}),this.props.onSelectedLayoutChange(e)}},{key:"render",value:function(){var e=this;return Object(l.createElement)("div",{className:"LayoutSelector"},this.props.options.map((function(t,n){return"number"==typeof t.value&&(e.state.selectedOption=Number(e.state.selectedOption)),Object(l.createElement)("label",{className:"LayoutOption",key:n},Object(l.createElement)("div",{style:{display:"flex"}},Object(l.createElement)(_.RadioControl,{name:"layoutOption",selected:e.state.selectedOption,options:[{value:t.value}],onChange:e.setSelected}),t.label),t.image?Object(l.createElement)("img",{src:t.image}):null,t.help?Object(l.createElement)("p",{className:"help",dangerouslySetInnerHTML:{__html:t.help}}):null)})))}}]),t}(l.Component),I=n(27),N=n(8),P=function(e){function t(){return r()(this,t),p()(this,m()(t).apply(this,arguments))}return f()(t,e),c()(t,[{key:"render",value:function(){return Object(l.createElement)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 512 376"},Object(l.createElement)("path",{d:"M0,0v376h512V0H0z M480,344H32V32h448V344z"}),Object(l.createElement)("circle",{cx:"409.1",cy:"102.9",r:"40.9"}),Object(l.createElement)("polygon",{points:"480,344 32,344 118.3,179.8 140,191.1 189,113.8 289,226.9 297.9,217.6 315,239.9 341,193.5 393.9,264.7 409,248.8"}))}}]),t}(l.Component),A=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,t=e.onChange,n=e.onRemove,a=e.image_id,i=e.image_url,o=e.onFocalPointsChange,r=e.focal_points,s=[];return i?s.push("carousel-header-image-container"):(s.push("ch-image-upload-placeholder"),s.push("ch-image-upload-has-placeholder")),s=s.join(" "),Object(l.createElement)(l.Fragment,null,Object(l.createElement)(N.MediaUpload,{onSelect:t,allowedTypes:["image"],value:a,render:function(e){return i?Object(l.createElement)("div",{className:s,tabIndex:0},i&&n&&Object(l.createElement)("button",{className:"ch-image-upload-remove",onClick:function(e){n(),e.stopPropagation()}},Object(l.createElement)(_.Dashicon,{icon:"no"})),Object(l.createElement)(_.FocalPointPicker,{url:i,value:r,onChange:function(e){return o(e)}})):Object(l.createElement)("div",{className:s,onClick:e.open,onKeyDown:function(t){13===t.keyCode&&e.open()},role:"button",tabIndex:0},i&&n&&Object(l.createElement)("button",{className:"ch-image-upload-remove",onClick:function(e){n(),e.stopPropagation()}},Object(l.createElement)(_.Dashicon,{icon:"no"})),Object(l.createElement)(P,null))}}))}}]),t}(l.Component),F=wp.apiFetch,B=E(_.TextControl),D=E(_.TextareaControl),R=function(e){function t(e){var n;return r()(this,t),(n=p()(this,m()(t).call(this,e))).state={image_id:null,image_url:null,focal_points:e.focal_points,isHidden:!1},n.getMedia(),n}return f()(t,e),c()(t,[{key:"getMedia",value:function(){var e=this;this.props.image&&F({path:"/wp/v2/media/".concat(this.props.image)}).then((function(t){e.setState({image_id:t.id,image_url:t.source_url})}))}},{key:"onImageChange",value:function(e){this.props.onImageChange(this.props.index,e.id),this.setState({image_id:e.id,image_url:e.url})}},{key:"onImageRemove",value:function(){this.props.onImageChange(this.props.index,null),this.setState({image_id:null,image_url:null})}},{key:"onFocalPointsChange",value:function(e){this.props.onFocalPointsChange(this.props.index,e),this.setState({focal_points:e})}},{key:"collapseSlide",value:function(){this.setState({isHidden:!0})}},{key:"openSlide",value:function(){this.setState({isHidden:!1})}},{key:"toggleSlide",value:function(){this.setState({isHidden:!this.state.isHidden})}},{key:"render",value:function(){var e=this,t=wp.i18n.__;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",{className:this.state.isHidden?"":"carousel-header-slide-container"},Object(l.createElement)("div",{onClick:function(t){return e.toggleSlide()},className:"slide-number-row"},Object(l.createElement)("span",null,t("Slide","p4ge")," ",this.props.index+1),Object(l.createElement)("span",{className:this.state.isHidden?"slide-arrow":"slide-arrow slide-open"},Object(l.createElement)(_.Dashicon,{icon:"arrow-down-alt2"}))),!this.state.isHidden&&Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",{className:"carousel-header-slide-options-wrapper"},Object(l.createElement)("div",null,t("Select image and focal point","p4ge")),Object(l.createElement)(A,{image_id:this.state.image_id,image_url:this.state.image_url,focal_points:this.state.focal_points,onRemove:function(){return e.onImageRemove()},onChange:function(t){return e.onImageChange(t)},onFocalPointsChange:function(t){return e.onFocalPointsChange(t)}}),Object(l.createElement)("div",{className:"ch-url-input-control__wrapper"},Object(l.createElement)(B,{className:"carouselh-header-input",label:t("Header","p4ge"),placeholder:t("Enter header","p4ge"),value:this.props.header,onChange:function(t){return e.props.onHeaderChange(e.props.index,t)},characterLimit:40}),Object(l.createElement)(_.SelectControl,{label:t("Header text size","p4ge"),value:this.props.header_size,options:[{label:"h1",value:"h1"},{label:"h2",value:"h2"},{label:"h3",value:"h3"}],onChange:function(t){return e.props.onHeaderSizeChange(e.props.index,t)}})),this.props.hasSubheader&&Object(l.createElement)(B,{label:t("Subheader","p4ge"),placeholder:t("Enter subheader","p4ge"),value:this.props.subheader,onChange:function(t){return e.props.onSubheaderChange(e.props.index,t)},characterLimit:80}),Object(l.createElement)(D,{label:t("Description","p4ge"),placeholder:t("Enter description of image","p4ge"),value:this.props.description,onChange:function(t){return e.props.onDescriptionChange(e.props.index,t)},characterLimit:200}),Object(l.createElement)("div",{className:"ch-url-input-control__wrapper"},Object(l.createElement)(B,{label:t("Link text and url","p4ge"),placeholder:t("Enter link text for image","p4ge"),value:this.props.link_text,onChange:function(t){return e.props.onLinkTextChange(e.props.index,t)},className:"carousel-header-link-text-input"}),Object(l.createElement)("form",{className:"ch-url-input-control",onSubmit:function(e){return e.preventDefault()}},Object(l.createElement)("div",{className:"ch-url-input-control__wrapper"},Object(l.createElement)(I.URLInput,{label:t("Url for link","p4ge"),className:"ch-url-input-control__input",value:this.props.link_url,onChange:function(t){return e.props.onLinkUrlChange(e.props.index,t)},autoFocus:!1}),Object(l.createElement)("div",{className:"ch-url-input-control__new-tab"},Object(l.createElement)(_.ToggleControl,{help:t("New Tab","p4ge"),checked:this.props.link_url_new_tab,onChange:function(t){return e.props.onLinkNewTabChange(e.props.index,t)}})))))))))}}]),t}(l.Component),H=n(19),M=function(e){function t(e){var n;return r()(this,t),(n=p()(this,m()(t).call(this,e))).refs=[],n.firstRender=!0,n}return f()(t,e),c()(t,[{key:"setDOMListener",value:function(){var e=window.setInterval((function(){document.getElementById("carousel-wrapper-header")&&(window.clearInterval(e),Object(H.a)())}),500)}},{key:"componentDidMount",value:function(){this.collapseSlides(),this.setDOMListener()}},{key:"componentDidUpdate",value:function(){this.firstRender&&(this.collapseSlides(),this.firstRender=!1),this.setDOMListener()}},{key:"getSnapshotBeforeUpdate",value:function(e,t){this.setDOMListener()}},{key:"collapseSlides",value:function(){var e=this.refs;Object.keys(this.refs).forEach(function(t){null!==e[t]&&e[t].collapseSlide()}.bind(e))}},{key:"addNewSlide",value:function(){this.collapseSlides(),this.props.addSlide()}},{key:"removeSlide",value:function(){this.props.removeSlide()}},{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__;return Object(l.createElement)("div",null,Object(l.createElement)("h3",null,t("What style of carousel do you need?","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(L,{selectedOption:this.props.block_style,onSelectedLayoutChange:this.props.onBlockStyleChange,options:[{label:t("Zoom and slide to gray","p4ge"),image:window.p4ge_vars.home+"images/carousel-with-preview.png",value:"zoom-and-slide-to-gray",help:t("This carousel provides a fancy transition, and a preview for the next slide in an oblique shape.")},{label:t("Full width classic","p4ge"),image:window.p4ge_vars.home+"images/carousel-classic.png",value:"full-width-classic",help:t("This is a full width slider with a classic look: big slides, fade transition, and no subheaders.")}]})),Object(l.createElement)("div",null,Object(l.createElement)(_.CheckboxControl,{label:t("Carousel Autoplay","p4ge"),help:t("Select to trigger images autoslide","p4ge"),value:this.props.carousel_autoplay,checked:!0===this.props.carousel_autoplay,onChange:function(t){return e.props.onCarouselAutoplayChange(t)}})),this.props.slides.map((function(t,n){return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(R,i()({},t,{onImageChange:e.props.onImageChange,onHeaderChange:e.props.onHeaderChange,onHeaderSizeChange:e.props.onHeaderSizeChange,onSubheaderChange:e.props.onSubheaderChange,onDescriptionChange:e.props.onDescriptionChange,onLinkTextChange:e.props.onLinkTextChange,onLinkUrlChange:e.props.onLinkUrlChange,onLinkNewTabChange:e.props.onLinkNewTabChange,onStyleChange:e.props.onStyleChange,onFocalPointsChange:e.props.onFocalPointsChange,hasSubheader:"full-width-classic"!==e.props.block_style,index:n,key:n,ref:function(t){e.refs[n]=t}})))})),Object(l.createElement)("div",{className:"carousel-header-add-remove-slide"},Object(l.createElement)(_.Button,{isPrimary:!0,onClick:this.addNewSlide.bind(this),disabled:this.props.slides.length>=4},"Add Slide"),Object(l.createElement)(_.Button,{isDefault:!0,onClick:this.removeSlide.bind(this),disabled:this.props.slides.length<=1},"Remove Slide")))}},{key:"render",value:function(){return Object(l.createElement)(l.Fragment,null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},this.props.slides.length&&this.props.slides[0].image>0?Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/carousel-header",attributes:{block_style:this.props.block_style,carousel_autoplay:this.props.carousel_autoplay,slides:this.props.slides}}):Object(l.createElement)("div",null,"Not enough data available to render the block yet.")))}}]),t}(l.Component),U=n(15),J=n.n(U),z=E(_.TextControl),W=E(_.TextareaControl),q=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=this.props,a=n.columns_title,i=n.columns_description,o=n.columns_block_style,r=n.columns,s=n.column_img,c=n.onDeleteImage;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("h3",null,t("What style of column do you need?","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(L,{selectedOption:o,onSelectedLayoutChange:this.props.onSelectedLayoutChange,options:[{label:t("No Image","p4ge"),image:window.p4ge_vars.home+"images/columns-no_images.jpg",value:"no_image",help:t("Optional headers, description text and buttons in a column display.","p4ge")},{label:t("Tasks","p4ge"),image:window.p4ge_vars.home+"images/columns-tasks.jpg",value:"tasks",help:t("Used on Take Action pages, this display has ordered tasks, and call to action buttons.","p4ge")},{label:t("Icons","p4ge"),image:window.p4ge_vars.home+"images/columns-icons.jpg",value:"icons",help:t("For more static content, this display has an icon, header, description and text link.","p4ge")},{label:t("Images","p4ge"),image:window.p4ge_vars.home+"images/columns-images.jpg",value:"image",help:t("For more static content, this display has an image, header, description and text link.","p4ge")}]})),Object(l.createElement)("div",null,Object(l.createElement)(z,{label:t("Title","p4ge"),placeholder:t("Enter block title","p4ge"),value:a,onChange:this.props.onTitleChange,characterLimit:40}),Object(l.createElement)(W,{label:t("Description","p4ge"),placeholder:t("Enter block description","p4ge"),value:i,onChange:this.props.onDescriptionChange,characterLimit:200})),Object(l.createElement)("div",null,r.map((function(n,a){return Object(l.createElement)("div",{key:a},Object(l.createElement)("div",null,Object(l.createElement)("hr",null)),!n.title&&!n.description&&Object(l.createElement)("div",null,Object(l.createElement)("b",null,t("Please provide a header or a body for this column to be displayed.","p4ge"))),Object(l.createElement)(z,{label:t("Column %s: Header","p4ge").replace("%s",a+1),placeholder:t("Enter header of %s column","p4ge").replace("%s",a+1),value:n.title,onChange:e.props.onColumnHeaderChange.bind(e,a),characterLimit:40}),Object(l.createElement)(W,{label:t("Column %s: Body","p4ge").replace("%s",a+1),placeholder:t("Enter body of %s column","p4ge").replace("%s",a+1),value:n.description,onChange:e.props.onColumnDescriptionChange.bind(e,a),characterLimit:400}),"no_image"!=o&&Object(l.createElement)("div",{className:"components-base-control"},Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{type:"image",onSelect:e.props.onSelectImage.bind(e,a),value:n.attachment,allowedTypes:"icons"===o?["image/png"]:["image"],render:function(e){return function(e,n){return r[n]&&r[n].attachment&&0<r[n].attachment?Object(l.createElement)("div",{align:"center"},Object(l.createElement)("div",null,t("Column %s: Image","p4ge").replace("%s",n+1)),Object(l.createElement)("div",{className:"img-wrap"},Object(l.createElement)(_.Tooltip,{text:t("Remove Column Image","p4ge")},Object(l.createElement)("span",{className:"close",onClick:function(e){c(n),e.stopPropagation()}},"Ã—")),Object(l.createElement)("img",{src:s[r[n].attachment],onClick:e,className:"Columns__imgs",width:"400px",style:{padding:"10px 10px"}}))):Object(l.createElement)("div",{className:"column-img-btn-container"},Object(l.createElement)("div",{className:"column-img-label"},t("Column %s: Image","p4ge").replace("%s",n+1)),Object(l.createElement)(_.Button,{onClick:e,className:"button"},"+ ",t("Select Column %s: Image","p4ge").replace("%s",n+1)))}(e.open,a)}})),"icons"===o&&n.attachment>0&&void 0!==s[n.attachment]&&!s[n.attachment].endsWith(".png")&&Object(l.createElement)("div",null,Object(l.createElement)("b",null,t("Please select another image for this column, as the current image is not an icon and you have chosen columns style icons. ","p4ge")))),Object(l.createElement)(z,{label:t("Column %s: Button/CtA Link","p4ge").replace("%s",a+1),placeholder:t("Enter link for column %s","p4ge").replace("%s",a+1),value:n.cta_link,onChange:e.props.onCTALinkChange.bind(e,a)}),Object(l.createElement)(_.ToggleControl,{label:t("Open link in new tab","p4ge"),help:t("Open Column %s: Button/CtA Link in a new tab","p4ge").replace("%s",a+1),value:n.link_new_tab,checked:n.link_new_tab,onChange:e.props.onLinkNewTabChange.bind(e,a)}),Object(l.createElement)(z,{label:t("Column %s: Button/CtA Text","p4ge").replace("%s",a+1),placeholder:t("Enter text of button/link for column %s","p4ge").replace("%s",a+1),value:n.cta_text,onChange:e.props.onCTAButtonTextChange.bind(e,a)}))})),r.length<4&&Object(l.createElement)(_.Tooltip,{text:t("Add Column","p4ge")},Object(l.createElement)("button",{className:"wp-block-p4ge-blocks-columns__addIcon",onClick:this.props.addColumn},t("Add Column","p4ge")," ",Object(l.createElement)(_.Dashicon,{icon:"plus",size:12}))),r.length>0&&Object(l.createElement)(_.Tooltip,{text:t("Remove Column","p4ge")},Object(l.createElement)("button",{className:"wp-block-p4ge-blocks-columns__removeIcon",onClick:this.props.removeColumn},t("Remove Column","p4ge")," ",Object(l.createElement)(_.Dashicon,{icon:"minus",size:12})))))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/columns",attributes:{columns_block_style:this.props.columns_block_style,columns_title:this.props.columns_title,columns_description:this.props.columns_description,columns:this.props.columns.map((function(e){return!0!==e.link_new_tab&&(e.link_new_tab=!1),e}))}})))}}]),t}(l.Component),G=n(14),V=wp.i18n.__,K=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=wp.i18n.__;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)("h2",null,e("Cookies options","p4ge")),Object(l.createElement)("p",null,Object(l.createElement)("i",null,e("Display opt-in options for cookies","p4ge"))),Object(l.createElement)("div",null,Object(l.createElement)(_.TextControl,{label:"Title",placeholder:"Enter title",value:this.props.title,onChange:this.props.onTitleChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.TextareaControl,{label:"Description",placeholder:"Enter description",value:this.props.description,onChange:this.props.onDescriptionChange})),Object(l.createElement)("hr",null),Object(l.createElement)("div",null,Object(l.createElement)(_.TextControl,{label:"Necessary Cookies Name",placeholder:"Enter cookies name",value:this.props.necessary_cookies_name,onChange:this.props.onNecessaryCookiesNameChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.TextareaControl,{label:"Necessary Cookies Description",placeholder:"Enter cookies description",value:this.props.necessary_cookies_description,onChange:this.props.onNecessaryCookiesDescriptionChange})),Object(l.createElement)("hr",null),Object(l.createElement)("div",null,Object(l.createElement)(_.TextControl,{label:"All Cookies Name",placeholder:"Enter cookies name",value:this.props.all_cookies_name,onChange:this.props.onAllCookiesNameChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.TextareaControl,{label:"All Cookies Description",placeholder:"Enter cookies description",value:this.props.all_cookies_description,onChange:this.props.onAllCookiesDescriptionChange}))))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/cookies",attributes:{title:this.props.title,description:this.props.description,necessary_cookies_name:this.props.necessary_cookies_name,necessary_cookies_description:this.props.necessary_cookies_description,all_cookies_name:this.props.all_cookies_name,all_cookies_description:this.props.all_cookies_description},urlQueryArgs:{post_id:document.querySelector("#post_ID").value}})))}}]),t}(l.Component),Q=E(_.TextControl),Y=E(_.TextareaControl),Z=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=wp.i18n.__;return Object(l.createElement)("div",null,Object(l.createElement)("h3",null,e("What style of counter do you need?","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(L,{selectedOption:this.props.style,onSelectedLayoutChange:this.props.onSelectedLayoutChange,options:[{label:e("Text Only","p4ge"),image:window.p4ge_vars.home+"images/counter_th_text.png",value:"plain",help:e("Text to describe your progress","p4ge")},{label:e("Progress Bar","p4ge"),image:window.p4ge_vars.home+"images/counter_th_bar.png",value:"bar",help:e("A bar to visualise the progress.","p4ge")},{label:e("Progress Dial","p4ge"),image:window.p4ge_vars.home+"images/counter_th_arc.png",value:"arc",help:e("A dial to visualise the progress.","p4ge")},{label:e("Progress bar inside EN Form","p4ge"),image:window.p4ge_vars.home+"images/counter_th_bar.png",value:"en-forms-bar",help:e("A bar inside an En Form. Select this only if you are adding an EN Form to the same page.","p4ge")}]})),Object(l.createElement)("div",null,Object(l.createElement)(Q,{label:e("Title","p4ge"),placeholder:e("Enter title","p4ge"),value:this.props.title,onChange:this.props.onTitleChange,characterLimit:60})),Object(l.createElement)("div",null,Object(l.createElement)(Y,{label:e("Description","p4ge"),placeholder:e("Enter description","p4ge"),value:this.props.description,onChange:this.props.onDescriptionChange,characterLimit:400})),Object(l.createElement)("div",null,Object(l.createElement)(Q,{label:e("Completed","p4ge"),placeholder:e("e.g. number of signatures","p4ge"),type:"number",value:this.props.completed,onChange:this.props.onCompletedChange})),Object(l.createElement)("div",null,Object(l.createElement)(Q,{label:e("Completed API URL","p4ge"),placeholder:e("API URL of completed number. If filled in will overide the 'Completed' field","p4ge"),value:this.props.completed_api,onChange:this.props.onCompletedAPIChange})),Object(l.createElement)("div",null,Object(l.createElement)(Q,{label:e("Target","p4ge"),placeholder:e("e.g. target no. of signatures","p4ge"),type:"number",value:this.props.target,onChange:this.props.onTargetChange})),Object(l.createElement)("div",null,Object(l.createElement)(Y,{label:e("Text","p4ge"),placeholder:e('e.g. "signatures collected of %target%"',"p4ge"),value:this.props.text,onChange:this.props.onTextChange}),Object(l.createElement)("p",{className:"FieldHelp"},"These placeholders can be used: ",Object(l.createElement)("code",null,"%completed%"),", ",Object(l.createElement)("code",null,"%target%"),", ",Object(l.createElement)("code",null,"%remaining%")," ")))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/counter",attributes:{title:this.props.title,description:this.props.description,style:this.props.style,completed:this.props.completed,completed_api:this.props.completed_api,target:this.props.target,text:this.props.text}})))}}]),t}(l.Component),X=(l.Component,wp.apiFetch),ee=wp.url.addQueryArgs,te=E(_.TextControl),ne=E(_.TextareaControl),ae=function(e){function t(e){var n;r()(this,t),n=p()(this,m()(t).call(this,e));var a=e.tagsList.filter((function(t){return e.tags.includes(t.id)})).map((function(e){return e.name})),i=e.postTypesList.filter((function(t){return e.post_types.includes(t.id)})).map((function(e){return e.name})),o=wp.i18n.__;return n.options=[{label:o("Content Covers","p4ge"),image:window.p4ge_vars.home+"images/content_covers.png",value:"3",help:o("Content covers pull the image from the post.")}],"campaign"!==wp.data.select("core/editor").getCurrentPostType()&&(n.options.push({label:o("Take Action Covers","p4ge"),image:window.p4ge_vars.home+"images/take_action_covers.png",value:"1",help:o("Take action covers pull the featured image, tags, have a 25 character excerpt and have a call to action button")}),n.options.push({label:o("Campaign Covers","p4ge"),image:window.p4ge_vars.home+"images/campaign_covers.png",value:"2",help:o("Campaign covers pull the associated image and hashtag from the system tag definitions.")})),n.state={tagTokens:a,postTypeTokens:i,selectedPosts:[]},n.populatePostsToken(),n.searchTimeout=null,n}return f()(t,e),c()(t,[{key:"populatePostsToken",value:function(){var e=this;if(this.props.posts.length>0){var t="1"===this.props.cover_type?"pages":"posts";X({path:ee("/wp/v2/"+t,{per_page:50,page:1,include:this.props.posts})}).then((function(t){var n=t.map((function(e){return e.title.rendered})),a=t.map((function(e){return e.title.rendered}));e.setState({postsTokens:n,postsList:t,postsSuggestions:a,selectedPosts:t})}))}else this.setState({postsTokens:[],postsList:[],postsSuggestions:[],selectedPosts:[]})}},{key:"searchPosts",value:function(e){var t,n=this;t="1"===this.props.cover_type?{path:ee("/wp/v2/pages",{per_page:-1,post_type:"page",post_parent:window.p4ge_vars.planet4_options.act_page,search:e,orderby:"title",post_status:"publish"})}:{path:ee("/wp/v2/posts",{per_page:50,page:1,search:e,orderby:"title",post_status:"publish"})},X(t).then((function(e){var t=e.map((function(e){return e.title.rendered}));n.setState({postsSuggestions:t,postsList:e})}))}},{key:"onPostsSearch",value:function(e){clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(function(){this.searchPosts(e)}.bind(this),500)}},{key:"onSelectedTagsChange",value:function(e){var t=this,n=e.map((function(e){return t.props.tagsList.filter((function(t){return t.name===e}))[0].id}));this.props.onSelectedTagsChange(n),this.setState({tagTokens:e})}},{key:"onSelectedPostTypesChange",value:function(e){var t=this,n=e.map((function(e){return t.props.postTypesList.filter((function(t){return t.name===e}))[0].id}));this.props.onSelectedPostTypesChange(n),this.setState({postTypeTokens:e})}},{key:"onSelectedPostsChange",value:function(e){var t=this,n=[];e.forEach((function(e){var a=t.state.postsList.filter((function(t){return t.title.rendered===e}));a.length>0&&n.push(a[0]),(a=t.state.selectedPosts.filter((function(t){return t.title.rendered===e}))).length>0&&n.push(a[0])}));var a=n.map((function(e){return e.id}));this.props.onSelectedPostsChange(a),this.setState({postsTokens:e,selectedPosts:n})}},{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=this.props.tagsList.map((function(e){return e.name})),a=this.props.postTypesList.map((function(e){return e.name}));return Object(l.createElement)("div",null,Object(l.createElement)("h3",null,t("What style of cover do you need?","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(L,{selectedOption:this.props.cover_type,onSelectedLayoutChange:this.props.onSelectedLayoutChange,options:this.options})),Object(l.createElement)("div",null,Object(l.createElement)(_.SelectControl,{label:"Rows to display",value:this.props.covers_view,options:[{label:"1 Row",value:"1"},{label:"2 Rows",value:"2"},{label:"All rows",value:"3"}],onChange:this.props.onRowsChange})),Object(l.createElement)("div",null,Object(l.createElement)(te,{label:"Title",placeholder:"Enter title",value:this.props.title,onChange:this.props.onTitleChange,characterLimit:40})),Object(l.createElement)("div",null,Object(l.createElement)(ne,{label:"Description",placeholder:"Enter description",value:this.props.description,onChange:this.props.onDescriptionChange,characterLimit:200})),"undefined"!==this.props.posts&&0===this.props.posts.length?Object(l.createElement)("div",null,Object(l.createElement)(_.FormTokenField,{value:this.state.tagTokens,suggestions:n,label:"Select Tags",onChange:function(t){return e.onSelectedTagsChange(t)},placeholder:"Select Tags"}),Object(l.createElement)("p",{class:"FieldHelp"},"Associate this block with Actions that have specific Tags")):null,"3"===this.props.cover_type&&0===this.props.posts.length?Object(l.createElement)(_.FormTokenField,{value:this.state.postTypeTokens,suggestions:a,label:"Post Types",onChange:function(t){return e.onSelectedPostTypesChange(t)},placeholder:"Select Tags"}):null,"1"!==this.props.cover_type&&"3"!==this.props.cover_type||0!==this.props.tags.length||0!==this.props.post_types.length?null:Object(l.createElement)("div",null,Object(l.createElement)("label",null,"Manual override"),Object(l.createElement)(_.FormTokenField,{value:this.state.postsTokens,suggestions:this.state.postsSuggestions,label:"CAUTION: Adding covers manually will override the automatic functionality.",onChange:function(t){return e.onSelectedPostsChange(t)},onInputChange:function(t){return e.onPostsSearch(t)},placeholder:"Select Tags"})))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/covers",attributes:{cover_type:this.props.cover_type,covers_view:this.props.covers_view,tags:this.props.tags,post_types:this.props.post_types,posts:this.props.posts,title:this.props.title,description:this.props.description}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"1"!==e.cover_type&&"2"!==e.cover_type||(t.postTypeTokens=[]),0===e.posts.length&&(t.postsTokens=[]),t}}]),t}(l.Component),ie=n(17),oe=n.n(ie),re=E(_.TextControl),le=E(_.TextareaControl),se=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=this.props,a=n.gallery_block_style,i=n.gallery_block_title,o=n.gallery_block_description,r=n.multiple_image,s=n.image_data,c=n.onDeleteImage,u={width:400,height:100},p=r?r.split(","):[];return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(N.BlockControls,null,0<s.length&&Object(l.createElement)(_.Toolbar,null,0<p.length&&Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{onSelect:this.props.onSelectImage,allowedTypes:["image"],value:p,type:"image",multiple:"true",render:function(e){var n=e.open;return Object(l.createElement)(_.IconButton,{className:"components-icon-button components-toolbar__control",label:t("Edit Images","mytheme-blocks"),onClick:n,icon:"edit"})}})),Object(l.createElement)(_.IconButton,{className:"components-icon-button components-toolbar__control",label:t("Remove Images","mytheme-blocks"),onClick:this.props.onRemoveImages,icon:"trash"}))),Object(l.createElement)("h3",null,t("What style of gallery do you need?","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(L,{selectedOption:a,onSelectedLayoutChange:this.props.onSelectedLayoutChange,options:[{label:t("Slider","p4ge"),image:window.p4ge_vars.home+"images/gallery-slider.jpg",value:1,help:t("The slider is a carousel of images. For more than 5 images, consider using a grid.","p4ge")},{label:t("3 Column","p4ge"),image:window.p4ge_vars.home+"images/gallery-3-column.jpg",value:2,help:t("The 3 column image display is great for accentuating text, and telling a visual story.","p4ge")},{label:t("Grid","p4ge"),image:window.p4ge_vars.home+"images/gallery-grid.jpg",value:3,help:t("The grid shows thumbnails of lots of images. Good to use when showing lots of activity.","p4ge")}]})),Object(l.createElement)("div",null,Object(l.createElement)(re,{label:t("Title","p4ge"),placeholder:t("Enter Title","p4ge"),value:i,onChange:this.props.onTitleChange,characterLimit:40}),Object(l.createElement)(le,{label:t("Description","p4ge"),help:t("Please Enter Description","p4ge"),value:o,onChange:this.props.onDescriptionChange,characterLimit:400}),t("Select Gallery Images","p4ge"),Object(l.createElement)("div",null,Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{title:t("Select Gallery Images","p4ge"),type:"image",onSelect:this.props.onSelectImage,value:p,allowedTypes:["image"],multiple:"true",render:function(n){var a,i=n.open;return a=i,0<e.props.image_data.length?e.props.image_data.map((function(e,n){return Object(l.createElement)("span",{key:n},Object(l.createElement)("div",{className:"img-wrap"},Object(l.createElement)(_.Tooltip,{text:t("Remove Gallery Image","p4ge")},Object(l.createElement)("span",{className:"close",onClick:function(t){c(e.id),t.stopPropagation()}},"Ã—")),Object(l.createElement)("img",{src:e.url,onClick:a,className:"gallery__imgs",key:n,width:"150 px",style:{padding:"10px 10px"}})))})):Object(l.createElement)("div",{className:"button-container"},Object(l.createElement)(_.Button,{onClick:a,className:"button"},"+ ",t("Select Gallery Images","p4ge")),Object(l.createElement)("div",null,t("Select images in the order you want them to appear.","p4ge")))}}))),s&&Object(l.createElement)("div",{className:"wp-block-master-theme-gallery__FocalPointPicker"},Object(l.createElement)("ul",null,s.map((function(n,a){return Object(l.createElement)("li",{key:a},t("Select gallery image focal point","p4ge"),Object(l.createElement)(_.FocalPointPicker,{url:n.url,dimensions:u,value:n.focalPoint,onChange:e.props.onFocalPointChange.bind(e,n.id),key:n.id}))}))))))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/gallery",attributes:{gallery_block_style:this.props.gallery_block_style,gallery_block_title:this.props.gallery_block_title,gallery_block_description:this.props.gallery_block_description,multiple_image:this.props.multiple_image,gallery_block_focus_points:this.props.gallery_block_focus_points}})))}}]),t}(l.Component),ce=(wp.i18n.__,function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=this.props,a=n.focus_image,i=n.opacity,o=n.mailing_list_iframe,r=n.iframe_url,s=n.url,c=n.id,u={x:"",y:""};if(a){var p=a.replace(/%/g,"").split(" "),d=oe()(p,2);u={x:d[0]/100,y:d[1]/100}}else u={x:.5,y:.5};return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(N.InspectorControls,null,Object(l.createElement)(_.PanelBody,{title:t("Setting","p4ge")},Object(l.createElement)(_.RangeControl,{label:t("Opacity","p4ge"),value:i,onChange:this.props.onOpacityChange,min:1,max:100,initialPosition:i,help:t("We use an overlay to fade the image back. Use a number between 1 and 100, the higher the number, the more faded the image will look. If you leave this empty, the default of 30 will be used.","p4ge")}),Object(l.createElement)(_.ToggleControl,{label:t("Use mailing list iframe","p4ge"),help:t("Use mailing list iframe","p4ge"),value:o,checked:this.props.mailing_list_iframe,onChange:this.props.onMailingListIframeChange}),Object(l.createElement)(_.TextControl,{label:t("Iframe url","p4ge"),placeholder:t("Enter Iframe url","p4ge"),help:t("If a url is set in this field and the 'mailing list iframe' option is enabled, it will override the planet4 engaging network setting.","p4ge"),value:r,onChange:this.props.onIframeUrlChange}))),Object(l.createElement)(N.BlockControls,null,this.props.id&&0<this.props.id&&Object(l.createElement)(_.Toolbar,null,Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{onSelect:this.props.onSelectImage,allowedTypes:["image"],value:c,type:"image",render:function(e){var n=e.open;return Object(l.createElement)(_.IconButton,{className:"components-icon-button components-toolbar__control",label:t("Edit Image","p4ge"),onClick:n,icon:"edit"})}})),Object(l.createElement)(_.IconButton,{className:"components-icon-button components-toolbar__control",label:t("Remove Image","p4ge"),onClick:this.props.onRemoveImages,icon:"trash"}))),t("Select Background Image","p4ge"),Object(l.createElement)("div",null,Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{title:t("Select Background Image","p4ge"),type:"image",onSelect:this.props.onSelectImage,value:c,allowedTypes:["image"],render:function(n){var a,i=n.open;return a=i,e.props.id&&0<e.props.id?Object(l.createElement)("div",{align:"center"},Object(l.createElement)("img",{src:e.props.url,onClick:a,className:"happypoint__imgs",width:"400px",style:{padding:"10px 10px"}})):Object(l.createElement)("div",{className:"button-container"},Object(l.createElement)(_.Button,{onClick:a,className:"button"},"+ ",t("Select Background Image","p4ge")))}}))),c&&0<c&&Object(l.createElement)("div",null,t("Select focus point for background image","p4ge"),Object(l.createElement)(_.FocalPointPicker,{url:s,dimensions:{width:400,height:100},value:u,onChange:this.props.onFocalPointChange})))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/happypoint",attributes:{id:this.props.id,focus_image:this.props.focus_image,opacity:this.props.opacity,mailing_list_iframe:this.props.mailing_list_iframe,iframe_url:this.props.iframe_url,load_iframe:!0}})))}}]),t}(l.Component)),ue=E(_.TextControl),pe=E(_.TextareaControl),de=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=wp.i18n.__,t=this.props,n=t.video_title,a=t.description,i=t.youtube_id;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)(ue,{label:e("Media Title","p4ge"),placeholder:e("Enter video title","p4ge"),value:n,onChange:this.props.onTitleChange,characterLimit:40}),Object(l.createElement)(pe,{label:e("Description","p4ge"),help:e("(Optional)","p4ge"),value:a,onChange:this.props.onDescriptionChange,characterLimit:400}),Object(l.createElement)(ue,{label:e("Media URL/ID","p4ge"),placeholder:e("Enter URL","p4ge"),value:i,onChange:this.props.onMediaUrlChange,help:e("Can be a YouTube, Vimeo or Soundcloud URL or an mp4, mp3 or wav file URL.","p4ge")}),Object(l.createElement)(N.MediaPlaceholder,{labels:{title:e("Video poster image [Optional]","p4ge"),instructions:e("Applicable for .mp4 video URLs only.","p4ge")},icon:"format-image",onSelect:this.props.onSelectImage,onSelectURL:this.props.onSelectURL,onError:this.props.onUploadError,accept:"image/*",allowedTypes:["image"]})))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},this.props.youtube_id&&Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/media-video",attributes:{video_title:this.props.video_title,description:this.props.description,youtube_id:this.props.youtube_id,video_poster_img:this.props.video_poster_img}})))}}]),t}(l.Component),me=wp.i18n.__,he=(wp.apiFetch,wp.url.addQueryArgs,E(_.TextControl)),ge=E(_.TextareaControl),be=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.checkTwitterScript(),this.checkInstagramScript()}},{key:"componentDidUpdate",value:function(){this.checkTwitterScript(),this.checkInstagramScript()}},{key:"checkTwitterScript",value:function(){this.props.social_media_url.includes("twitter")&&(null===document.querySelector('script[src="https://platform.twitter.com/widgets.js"]')?this.loadScriptAsync("https://platform.twitter.com/widgets.js").then(function(){this.initializeTwitterEmbeds()}.bind(this)):this.initializeTwitterEmbeds())}},{key:"checkInstagramScript",value:function(){this.props.social_media_url.includes("instagram")&&(null===document.querySelector('script[src="https://www.instagram.com/embed.js"]')?this.loadScriptAsync("https://www.instagram.com/embed.js").then(function(){this.initializeInstagramEmbeds()}.bind(this)):this.initializeInstagramEmbeds())}},{key:"initializeTwitterEmbeds",value:function(){setTimeout((function(){"undefined"!==window.twttr&&window.twttr.widgets.load()}),2e3)}},{key:"initializeInstagramEmbeds",value:function(){setTimeout((function(){"undefined"!==window.instgrm&&window.instgrm.Embeds.process()}),3e3)}},{key:"loadScriptAsync",value:function(e){return new Promise((function(t,n){var a=document.createElement("script");a.src=e,a.async=!0,a.onload=function(){t()},document.getElementsByTagName("body")[0].appendChild(a)}))}},{key:"renderEdit",value:function(){var e=wp.i18n.__,t=e("Select oEmbed for the following types of social media<br>- Twitter: tweet, profile, list, collection, likes, moment<br>- Facebook: post, activity, photo, video, media, question, note<br>- Instagram: image","planet4-blocks-backend");return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)(he,{label:e("Title","planet4-blocks-backend"),placeholder:e("Enter title","planet4-blocks-backend"),help:e("Optional","planet4-blocks-backend"),value:this.props.title,onChange:this.props.onTitleChange,characterLimit:40})),Object(l.createElement)("div",null,Object(l.createElement)(ge,{label:e("Description","planet4-blocks-backend"),placeholder:e("Enter description","planet4-blocks-backend"),help:e("Optional","planet4-blocks-backend"),value:this.props.description,onChange:this.props.onDescriptionChange,characterLimit:400})),Object(l.createElement)("div",null,Object(l.createElement)(_.RadioControl,{label:e("Embed type","planet4-blocks-backend"),help:Object(l.createElement)(l.RawHTML,null,t),options:[{label:"oEmbed",value:"oembed"},{label:"Facebook page",value:"facebook_page"}],selected:this.props.embed_type,onChange:this.props.onEmbedTypeChange})),"facebook_page"===this.props.embed_type?Object(l.createElement)("div",null,Object(l.createElement)(_.SelectControl,{label:e("What Facebook page content would you like to display?","planet4-blocks-backend"),value:this.props.facebook_page_tab,options:[{label:"Timeline",value:"timeline"},{label:"Events",value:"events"},{label:"Mesages",value:"messages"}],onChange:this.props.onFacebookPageTabChange})):null,Object(l.createElement)("div",null,Object(l.createElement)(he,{label:e("URL","planet4-blocks-backend"),placeholder:e("Enter URL","planet4-blocks-backend"),value:this.props.social_media_url,onChange:this.props.onSocialMediaUrlChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.SelectControl,{label:e("Alignment","planet4-blocks-backend"),value:this.props.alignment_class,options:[{label:"None",value:""},{label:"Left",value:"alignleft"},{label:"Center",value:"aligncenter"},{label:"Right",value:"alignright"}],onChange:this.props.onAlignmentChange})))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/social-media",attributes:{title:this.props.title,description:this.props.description,embed_type:this.props.embed_type,facebook_page_tab:this.props.facebook_page_tab,social_media_url:this.props.social_media_url,alignment_class:this.props.alignment_class}})))}}]),t}(l.Component),fe=n(18),ve=n.n(fe),_e=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=this.props,a=n.cards,i=n.onDeleteImage;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)(_.TextControl,{label:t("Title","planet4-blocks-backend"),placeholder:t("Enter title","planet4-blocks-backend"),help:t("Optional","planet4-blocks-backend"),value:this.props.attributes.title,onChange:this.props.onTitleChange}),Object(l.createElement)(_.TextareaControl,{label:t("Description","planet4-blocks-backend"),placeholder:t("Enter description","planet4-blocks-backend"),help:t("Optional","planet4-blocks-backend"),value:this.props.attributes.description,onChange:this.props.onDescriptionChange})),t("Select Images","planet4-blocks-backend"),Object(l.createElement)("div",null,Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{title:t("Select Images","planet4-blocks-backend"),type:"image",onSelect:this.props.onSelectImages,value:a.map((function(e){return e.image_id})),allowedTypes:["image"],multiple:"true",render:function(e){var n,o=e.open;return n=o,a.length>0?a.map((function(e,a){return Object(l.createElement)("span",{className:"img-wrap"},Object(l.createElement)(_.Tooltip,{text:t("Remove Image","planet4-blocks-backend")},Object(l.createElement)("span",{className:"close",onClick:function(t){i(e.image_id),t.stopPropagation()}},"Ã—")),Object(l.createElement)("img",{src:e.image_url,onClick:n,className:"gallery__imgs",key:a,width:"150 px",style:{padding:"10px 10px"}}))})):Object(l.createElement)("div",{className:"button-container"},Object(l.createElement)(_.Button,{onClick:n,className:"button"},"+ ",t("Select Images","planet4-blocks-backend")),Object(l.createElement)("div",null,t("Select images in the order you want them to appear.","planet4-blocks-backend")))}}))),Object(l.createElement)("div",null,Object(l.createElement)("ul",null,a.map((function(n,a){return Object(l.createElement)("li",{key:a.toString()},Object(l.createElement)("div",{className:"row"},Object(l.createElement)("div",{className:"col-md-6"},Object(l.createElement)("img",{src:n.image_url,width:212,height:212})),Object(l.createElement)("div",{className:"col-md-6"},Object(l.createElement)(_.TextareaControl,{label:t("Social message","planet4-blocks-backend"),placeholder:t("Enter message","planet4-blocks-backend"),help:t("Optional. This message will be added as a quote on Facebook and Twitter shares.","planet4-blocks-backend"),value:n.message,onChange:e.props.onMessageChange.bind(e,a)}),Object(l.createElement)(_.TextControl,{label:t("Social URL","planet4-blocks-backend"),placeholder:t("Enter URL to share","planet4-blocks-backend"),help:t("Optional. If not specified then the url of the current page will be used.","planet4-blocks-backend"),value:n.social_url,onChange:e.props.onURLChange.bind(e,a)}))),Object(l.createElement)("hr",null))})))))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected&&this.renderEdit(),Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/social-media-cards",attributes:this.props.attributes})))}}]),t}(l.Component),ye=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"render",value:function(){var e=this;wp.i18n.__;void 0===this.props.disabled&&(this.props.disabled=!1);return Object(l.createElement)("div",{className:"ImageOrButton"},Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{title:this.props.title,type:"image",onSelect:this.props.onSelectImage,value:this.props.imageId,allowedTypes:["image"],render:function(t){var n,a=t.open;return n=a,e.props.imageId?Object(l.createElement)("img",{src:e.props.imageUrl,onClick:n,className:e.props.imgClass}):Object(l.createElement)("div",{className:"button-container"},Object(l.createElement)(_.Button,{onClick:n,className:"button",disabled:e.props.disabled},e.props.buttonLabel),Object(l.createElement)("div",null,e.props.help))}})))}}]),t}(l.Component),ke=E(_.TextControl),Ce=E(_.TextareaControl),Oe=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=this.props.tagsList.map((function(e){return{label:e.name,value:e.id}}));e.unshift({label:"--Select Tag--",value:0});var t=this.props.issuepageList.map((function(e){return{label:e.title.raw,value:e.id}}));t.unshift({label:"--Select Issue--",value:0});var n=wp.i18n.__,a=this.props,i=a.select_issue,o=a.title,r=a.issue_description,s=a.issue_link_text,c=a.issue_link_path,u=a.issue_image,p=a.focus_issue_image,d=a.select_tag,m=a.tag_description,h=a.button_text,g=a.button_link,b=a.tag_image,f=a.focus_tag_image,v=a.issue_image_url,y=a.tag_image_url,k={x:.5,y:.5};if(p){var C=p.replace(/\%/g,"").split(" "),O=oe()(C,2);k={x:O[0]/100,y:O[1]/100}}var E={x:.5,y:.5};if(f){var j=f.replace(/\%/g,"").split(" "),w=oe()(j,2);E={x:w[0]/100,y:w[1]/100}}var S={width:400,height:100};return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("h3",null,n("Issue fields (Column 1 - Left side)","p4ge")),Object(l.createElement)("div",null,t&&Object(l.createElement)(_.SelectControl,{label:n("Select an issue","p4ge"),value:i,options:t,onChange:this.props.onSelectIssue}),Object(l.createElement)(ke,{label:n("Issue Title","p4ge"),placeholder:n("Enter Title","p4ge"),value:o,onChange:this.props.onIssueTitleChange,help:n("(Optional) Fill this only if you need to override issue title.","p4ge"),characterLimit:40}),Object(l.createElement)(Ce,{label:n("Issue Description","p4ge"),placeholder:n("Enter Description","p4ge"),help:n("(Optional) Fill this only if you need to override issue description.","p4ge"),value:r,onChange:this.props.onIssueDescriptionChange,characterLimit:400}),Object(l.createElement)(ke,{label:n("Issue link text","p4ge"),placeholder:n("Enter link text","p4ge"),value:s,onChange:this.props.onIssueLinkTextChange,help:n("(Optional)","p4ge")}),Object(l.createElement)(ke,{label:n("Issue link path","p4ge"),placeholder:n("Enter link path","p4ge"),value:c,onChange:this.props.onIssueLinkPathChange,help:n("(Optional)","p4ge")}),n("Issue Image","p4ge"),Object(l.createElement)(ye,{title:n("Select Image for Issue","p4ge"),onSelectImage:this.props.onSelectIssueImage,imageId:u,imageUrl:v,buttonLabel:n("+ Select Image for Issue","p4ge"),help:n("(Optional)","p4ge"),imgClass:"splittwocolumns-block-issue-imgs"}),u&&Object(l.createElement)("div",null,n("Select focal point for issue image","p4ge"),Object(l.createElement)(_.FocalPointPicker,{url:v,dimensions:S,value:k,onChange:this.props.onIssueImageFocalPointChange}),n("(Optional)","p4ge"))),Object(l.createElement)("hr",null),Object(l.createElement)("h3",null,n("Campaign fields (Column 2 - Right side)","p4ge")),Object(l.createElement)("div",null,e&&Object(l.createElement)(_.SelectControl,{label:n("Select a tag","p4ge"),value:d,options:e,onChange:this.props.onSelectTag}),Object(l.createElement)(Ce,{label:n("Campaign Description","p4ge"),placeholder:n("Enter Description","p4ge"),help:n("(Optional)","p4ge"),value:m,onChange:this.props.onTagDescriptionChange,characterLimit:400}),Object(l.createElement)(ke,{label:n("Campaign button text","p4ge"),placeholder:n("Enter button text","p4ge"),value:h,onChange:this.props.onButtonTextChange,help:n("(Optional)","p4ge")}),Object(l.createElement)(ke,{label:n("Campaign button link","p4ge"),placeholder:n("Enter button link","p4ge"),value:g,onChange:this.props.onButtonLinkChange,help:n("(Optional)","p4ge")}),n("Campaign Image","p4ge"),Object(l.createElement)(ye,{title:n("Select Image for Campaign","p4ge"),onSelectImage:this.props.onSelectCampaignImage,imageId:b,imageUrl:y,buttonLabel:n("+ Select Image for Campaign","p4ge"),help:n("(Optional)","p4ge"),imgClass:"splittwocolumns-block-tag_imgs"}),b&&Object(l.createElement)("div",null,n("Select focal point for campaign image","p4ge"),Object(l.createElement)(_.FocalPointPicker,{url:y,dimensions:S,value:E,onChange:this.props.onCampaignImageFocalPointChange}),n("(Optional)","p4ge"))),Object(l.createElement)("hr",null))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/split-two-columns",attributes:{select_issue:this.props.select_issue,title:this.props.title,issue_description:this.props.issue_description,issue_link_text:this.props.issue_link_text,issue_link_path:this.props.issue_link_path,issue_image:this.props.issue_image,focus_issue_image:this.props.focus_issue_image,select_tag:this.props.select_tag,tag_description:this.props.tag_description,button_text:this.props.button_text,button_link:this.props.button_link,tag_image:this.props.tag_image,focus_tag_image:this.props.focus_tag_image}})))}}]),t}(l.Component),Ee=(wp.i18n.__,function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"render",value:function(){var e=this;return Object(l.createElement)("div",null,Object(l.createElement)("div",null,"Level ",this.props.index+1),Object(l.createElement)(_.SelectControl,{label:"Submenu item",help:"Submenu item",value:this.props.heading,options:[{label:"None",value:"0"},{label:"Heading 1",value:"1"},{label:"Heading 2",value:"2"},{label:"Heading 3",value:"3"},{label:"Heading 4",value:"4"},{label:"Heading 5",value:"5"},{label:"Heading 6",value:"6"}],onChange:function(t){return e.props.onHeadingChange(e.props.index,t)},className:"submenu-block-attribute-wrapper"}),Object(l.createElement)(_.CheckboxControl,{heading:"Link",help:"Link item",value:this.props.link,checked:this.props.link,onChange:function(t){return e.props.onLinkChange(e.props.index,t)},className:"submenu-level-link"}),Object(l.createElement)(_.SelectControl,{label:"List style",help:"List style",value:this.props.style,options:[{label:"None",value:"none"},{label:"Bullet",value:"bullet"},{label:"Number",value:"number"}],onChange:function(t){return e.props.onStyleChange(e.props.index,t)},className:"submenu-block-attribute-wrapper"}))}}]),t}(l.Component)),je=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__;return Object(l.createElement)("div",null,Object(l.createElement)("h2",null,t("Anchor Link Submenu","p4ge")),Object(l.createElement)("p",null,Object(l.createElement)("i",null,t("An in-page table of contents to help users have a sense of what's on the page and let them jump to a topic they are interested in.","p4ge"))),Object(l.createElement)("h3",null,t("What style of menu do you need?","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(L,{selectedOption:this.props.submenu_style,onSelectedLayoutChange:this.props.onSelectedLayoutChange,options:[{label:t("Long full-width","p4ge"),image:window.p4ge_vars.home+"images/submenu-long.jpg",value:1,help:t("Use: on long pages (more than 5 screens) when list items are long (+ 10 words)<br>No max items<br>recommended.")},{label:t("Short full-width","p4ge"),image:window.p4ge_vars.home+"images/submenu-short.jpg",value:2,help:t("Use: on long pages (more than 5 screens) when list items are short (up to 5 words)<br>No max items<br>recommended.")},{label:t("Short sidebar","p4ge"),image:window.p4ge_vars.home+"images/submenu-sidebar.jpg",value:3,help:t("Use: on long pages (more than 5 screens) when list items are short (up to 10 words)<br>Max items<br>recommended: 9")}]})),Object(l.createElement)("div",null,Object(l.createElement)(_.TextControl,{label:"Submenu Title",placeholder:"Enter title",value:this.props.title,onChange:this.props.onTitleChange})),Object(l.createElement)("hr",null),this.props.levels.map((function(t,n){return Object(l.createElement)(Ee,i()({},t,{onHeadingChange:e.props.onHeadingChange,onLinkChange:e.props.onLinkChange,onStyleChange:e.props.onStyleChange,index:n,key:n}))})),Object(l.createElement)("div",null,Object(l.createElement)(_.Button,{isPrimary:!0,onClick:this.props.addLevel,disabled:this.props.levels.length>=3||0===this.props.levels.slice(-1)[0].heading},"Add level"),Object(l.createElement)(_.Button,{isDefault:!0,onClick:this.props.removeLevel,disabled:this.props.levels.length<=1},"Remove level")))}},{key:"render",value:function(){return Object(l.createElement)(l.Fragment,null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/submenu",attributes:{submenu_style:this.props.submenu_style,title:this.props.title,levels:this.props.levels},urlQueryArgs:{post_id:document.querySelector("#post_ID").value}})))}}]),t}(l.Component),we=(wp.apiFetch,wp.url.addQueryArgs,E(_.TextControl)),Se=E(_.TextareaControl),Te=function(e){function t(e){var n;r()(this,t),n=p()(this,m()(t).call(this,e));var a=e.tagsList.filter((function(t){return e.tag_ids.includes(t.id)})).map((function(e){return e.name}));return n.state={tagTokens:a},n}return f()(t,e),c()(t,[{key:"onSelectedTagsChange",value:function(e){var t=this,n=e.map((function(e){return t.props.tagsList.filter((function(t){return t.name===e}))[0].id}));this.props.onSelectedTagsChange(n),this.setState({tagTokens:e})}},{key:"isCustomised",value:function(){return this.props.custom_title||this.props.custom_excerpt||this.props.custom_link||this.props.custom_link_text||this.props.custom_link_new_tab||this.state.tagTokens.length>0||this.props.background_image&&0<this.props.background_image}},{key:"takeActionPageSelected",value:function(){return this.props.take_action_page&&"0"!==this.props.take_action_page}},{key:"renderEdit",value:function(){var e=this,t=this.props.tagsList.map((function(e){return e.name})),n=this.props.actPageList.map((function(e){return{label:e.title.raw,value:e.id}})),a=wp.i18n.__;n.unshift({label:a("--Select Take Action Page--"),value:0});return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("h3",null,a("Take Action Boxout","p4ge")),Object(l.createElement)("div",null,Object(l.createElement)(_.SelectControl,{label:a("Select Take Action Page","p4ge"),value:this.props.take_action_page,options:n,onChange:this.props.onSelectTakeActoinPage,disabled:this.isCustomised()}),Object(l.createElement)("h5",null,a("Or customise your take action boxout (if inserted in POSTS, the block will float on the side, if inserted in PAGES, it will appear in the page body)","p4ge")),Object(l.createElement)(we,{label:a("Custom Title","p4ge"),placeholder:a("Enter Title","p4ge"),value:this.props.custom_title,onChange:this.props.onCustomTitleChange,disabled:this.takeActionPageSelected(),characterLimit:60}),Object(l.createElement)(Se,{label:a("Custom Excerpt","p4ge"),placeholder:a("Enter Custom Excerpt","p4ge"),value:this.props.custom_excerpt,onChange:this.props.onCustomExcerptChange,disabled:this.takeActionPageSelected(),characterLimit:200}),Object(l.createElement)(we,{label:a("Custom Link","p4ge"),placeholder:a("Enter Custom Link","p4ge"),value:this.props.custom_link,onChange:this.props.onCustomLinkChange,disabled:this.takeActionPageSelected()}),Object(l.createElement)(we,{label:a("Custom Link Text","p4ge"),placeholder:a("Enter Custom Link Text","p4ge"),value:this.props.custom_link_text,onChange:this.props.onCustomLinkTextChange,disabled:this.takeActionPageSelected()}),Object(l.createElement)(_.CheckboxControl,{label:a("Open in a new Tab","p4ge"),help:a("Open custom link in new tab","p4ge"),value:this.props.custom_link_new_tab,checked:this.props.custom_link_new_tab,onChange:function(t){return e.props.onCustomLinkNewTabChange(t)},disabled:this.takeActionPageSelected()}),Object(l.createElement)(_.FormTokenField,{value:this.state.tagTokens,suggestions:t,label:a("Select Tags","p4ge"),onChange:function(t){return e.onSelectedTagsChange(t)},disabled:this.takeActionPageSelected()}),Object(l.createElement)("br",null),a("Select Background Image","p4ge"),Object(l.createElement)("div",null,Object(l.createElement)(N.MediaUploadCheck,null,Object(l.createElement)(N.MediaUpload,{title:a("Select Background Image","p4ge"),type:"image",onSelect:this.props.onSelectBackGroundImage,value:this.props.background_image,allowedTypes:["image"],render:function(t){var n,i=t.open;return n=i,e.props.background_image&&0<e.props.background_image?Object(l.createElement)("div",{align:"center"},Object(l.createElement)("img",{src:e.props.background_image_url,onClick:n,className:"takeactionboxout-block-background-img",width:"400px",style:{padding:"10px 10px"}})):Object(l.createElement)("div",{className:"button-container"},Object(l.createElement)(_.Button,{onClick:n,className:"button",disabled:e.takeActionPageSelected()},"+ ",a("Select Background Image","p4ge")))}}))),Object(l.createElement)(N.BlockControls,null,this.props.background_image&&0<this.props.background_image&&Object(l.createElement)(_.Toolbar,null,Object(l.createElement)(_.IconButton,{className:"components-icon-button components-toolbar__control",label:a("Remove Image","p4ge"),onClick:this.props.onRemoveBackGroundImage,icon:"trash"})))),Object(l.createElement)("hr",null))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/take-action-boxout",attributes:{take_action_page:this.props.take_action_page,custom_title:this.props.custom_title,custom_excerpt:this.props.custom_excerpt,custom_link:this.props.custom_link,custom_link_text:this.props.custom_link_text,custom_link_new_tab:this.props.custom_link_new_tab,tag_ids:this.props.tag_ids,background_image:this.props.background_image}})))}}]),t}(l.Component),xe=E(_.TextControl),Le=E(_.TextareaControl),Ie=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){this.loadTimeline(this.props)}},{key:"componentDidUpdate",value:function(e){this.loadTimeline(e)}},{key:"loadTimeline",value:function(e){this.loadScriptAsync("https://cdn.knightlab.com/libs/timeline3/3.6.3/js/timeline-min.js").then(function(){new TL.Timeline("timeline-1",e.google_sheets_url,{timenav_position:e.timenav_position,start_at_end:e.start_at_end,language:e.language})}.bind(this))}},{key:"loadScriptAsync",value:function(e){return new Promise((function(t,n){var a=document.createElement("script");a.src=e,a.async=!0,a.onload=function(){t()},document.getElementsByTagName("body")[0].appendChild(a)}))}},{key:"renderEdit",value:function(){var e=this,t=wp.i18n.__,n=t("Enter the URL of the Google Sheets spreadsheet containing your timeline data.","p4ge");return n+='<br><a href="https://timeline.knightlab.com/#make" target="_blank" rel="noopener noreferrer">',n+=t("See the TimelineJS website for a template GSheet.","p4ge"),n+="</a><br>",n+=t("Copy this, add your own timeline data, and publish to the web.","p4ge"),n+="<br>",n+=t("Once you have done so, use the URL from your address bar (not the one provided in Google's 'publish to web' dialog).","p4ge"),Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)("h2",null,t("Timeline options","p4ge")),Object(l.createElement)("p",null,Object(l.createElement)("i",null,t("Display a timeline from a Google Sheet","p4ge"))),Object(l.createElement)("div",null,Object(l.createElement)(xe,{label:t("Timeline Title","p4ge"),placeholder:t("Enter title","p4ge"),value:this.props.timeline_title,onChange:this.props.onTimelineTitleChange,characterLimit:60})),Object(l.createElement)("div",null,Object(l.createElement)(Le,{label:t("Description","p4ge"),placeholder:t("Enter description","p4ge"),value:this.props.description,onChange:this.props.onDescriptionChange,characterLimit:400})),Object(l.createElement)("div",null,Object(l.createElement)(xe,{label:t("Google Sheets URL","p4ge"),placeholder:t("Enter URL","p4ge"),help:Object(l.createElement)(l.RawHTML,null,n),value:this.props.google_sheets_url,onChange:this.props.onGoogleSheetsUrlChange})),Object(l.createElement)("div",null,Object(l.createElement)(_.SelectControl,{label:t("Language","p4ge"),value:this.props.language,options:[{label:"Afrikaans",value:"af"},{label:"Arabic",value:"ar"},{label:"Armenian",value:"hy"},{label:"Basque",value:"eu"},{label:"Belarusian",value:"be"},{label:"Bulgarian",value:"bg"},{label:"Catalan",value:"ca"},{label:"Chinese",value:"zh-cn"},{label:"Croatian / Hrvatski",value:"hr"},{label:"Czech",value:"cz"},{label:"Danish",value:"da"},{label:"Dutch",value:"nl"},{label:"English",value:"en"},{label:"English (24-hour time)",value:"en-24hr"},{label:"Esperanto",value:"eo"},{label:"Estonian",value:"et"},{label:"Faroese",value:"fo"},{label:"Farsi",value:"fa"},{label:"Finnish",value:"fi"},{label:"French",value:"fr"},{label:"Frisian",value:"fy"},{label:"Galician",value:"gl"},{label:"Georgian",value:"ka"},{label:"German / Deutsch",value:"de"},{label:"Greek",value:"el"},{label:"Hebrew",value:"he"},{label:"Hindi",value:"hi"},{label:"Hungarian",value:"hu"},{label:"Icelandic",value:"is"},{label:"Indonesian",value:"id"},{label:"Irish",value:"ga"},{label:"Italian",value:"it"},{label:"Japanese",value:"ja"},{label:"Korean",value:"ko"},{label:"Latvian",value:"lv"},{label:"Lithuanian",value:"lt"},{label:"Luxembourgish",value:"lb"},{label:"Malay",value:"ms"},{label:"Myanmar",value:"my"},{label:"Nepali",value:"ne"},{label:"Norwegian",value:"no"},{label:"Polish",value:"pl"},{label:"Portuguese",value:"pt"},{label:"pt-br",value:"Portuguese (Brazilian)"},{label:"Romanian",value:"ro"},{label:"Romansh",value:"rm"},{label:"Russian",value:"ru"},{label:"Serbian - Cyrillic",value:"sr-cy"},{label:"Serbian - Latin",value:"sr"},{label:"Sinhalese",value:"si"},{label:"Slovak",value:"sk"},{label:"Slovenian",value:"sl"},{label:"Spanish",value:"es"},{label:"Swedish",value:"sv"},{label:"Tagalog",value:"tl"},{label:"Tamil",value:"ta"},{label:"Taiwanese",value:"zh-tw"},{label:"Telugu",value:"te"},{label:"Thai",value:"th"},{label:"Turkish",value:"tr"},{label:"Ukrainian",value:"uk"},{label:"Urdu",value:"ur"}],onChange:function(t){return e.props.onLanguageChange(t)}})),Object(l.createElement)("div",null,Object(l.createElement)(_.SelectControl,{label:t("Timeline navigation position","p4ge"),value:this.props.timenav_position,options:[{label:"Bottom",value:"bottom"},{label:"Top",value:"top"}],onChange:function(t){return e.props.onTimenavPositionChange(t)}})),Object(l.createElement)("div",null,Object(l.createElement)(_.CheckboxControl,{label:t("Start at end","p4ge"),help:t("Begin at the end of the timeline","p4ge"),value:this.props.start_at_end,checked:this.props.start_at_end,onChange:function(t){return e.props.onStartAtEndChange(t)}}))))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/timeline",attributes:{timeline_title:this.props.timeline_title,description:this.props.description,google_sheets_url:this.props.google_sheets_url,language:this.props.language,timenav_position:this.props.timenav_position,start_at_end:this.props.start_at_end},urlQueryArgs:{post_id:document.querySelector("#post_ID").value}})))}}]),t}(l.Component),Ne=wp.i18n.__,Pe=wp.hooks.addFilter,Ae=function(){Pe("blocks.registerBlockType","planet4-blocks/filters/file",(function(e,t){return"core/file"!==t?e:(e.attributes.showDownloadButton.default=!1,e)}))},Fe=n(26),Be=n.n(Fe),De=wp.hooks.addFilter,Re=wp.i18n.__,$e=["core/image"],He=[{label:Re("Blue Overlay (default)"),value:"blue-overlay"},{label:Re("Medium"),value:"medium"}],Me=[{label:Re("Left"),value:"left"},{label:Re("Center"),value:"center"},{label:Re("Right"),value:"right"}],Ue=function(){De("blocks.registerBlockType","planet4-blocks/overrides/image",(function(e,t){return $e.includes(t)?(e.attributes=Be()(e.attributes,{captionStyle:{type:"string",default:He[0].value},captionAlignment:{type:"string",default:Me[1].value}}),e):e}))},Je=function(){var e=wp.compose.createHigherOrderComponent,t=wp.element.Fragment,n=wp.editor.InspectorControls,a=e((function(e){return function(a){if(!$e.includes(a.name))return Object(l.createElement)(e,a);var i=a.attributes,o=i.captionStyle,r=i.captionAlignment;return a.attributes.className="",o&&(a.attributes.className+=" caption-style-".concat(o)),r&&(a.attributes.className+=" caption-alignment-".concat(r)),Object(l.createElement)(t,null,Object(l.createElement)(e,a),Object(l.createElement)(n,null,Object(l.createElement)(_.PanelBody,{title:Re("Planet4 Image Options"),initialOpen:!0},Object(l.createElement)(_.SelectControl,{label:Re("Caption Style"),value:o,options:He,onChange:function(e){a.setAttributes({captionStyle:e})}}),Object(l.createElement)("label",null,"Caption alignment"),Object(l.createElement)(_.ButtonGroup,null,Me.map((function(e,t){return Object(l.createElement)(_.Button,{key:t,value:e.value,onClick:function(){a.setAttributes({captionAlignment:e.value})},isPrimary:r==e.value,isLarge:!0,isDefault:!0},e.label)}))))))}}),"withCaptionStyle");De("editor.BlockEdit","planet4-blocks/overrides/image-controls",a)},ze=n(16),We=n.n(ze),qe=n(10),Ge=n(9),Ve=n(12),Ke=n(25),Qe=n.n(Ke),Ye=n(24),Ze={per_page:-1,orderby:"count",order:"desc",_fields:"id,name"},Xe=function(e,t){return e.toLowerCase()===t.toLowerCase()},et=function(e){return ve()({},e,{name:Object(qe.unescape)(e.name)})},tt=function(e){return Object(qe.map)(e,et)},nt=function(e){function t(){var e;return r()(this,t),(e=p()(this,m()(t).apply(this,arguments))).onChange=e.onChange.bind(g()(e)),e.searchTerms=Object(qe.throttle)(e.searchTerms.bind(g()(e)),500),e.state={loading:!Object(qe.isEmpty)(e.props.terms),availableTerms:[],selectedTerms:[]},e}return f()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this;Object(qe.isEmpty)(this.props.terms)||(this.initRequest=this.fetchTerms({include:this.props.terms.join(","),per_page:-1}),this.initRequest.then((function(){e.setState({loading:!1})}),(function(t){"abort"!==t.statusText&&e.setState({loading:!1})})))}},{key:"componentWillUnmount",value:function(){Object(qe.invoke)(this.initRequest,["abort"]),Object(qe.invoke)(this.searchRequest,["abort"])}},{key:"componentDidUpdate",value:function(e){e.terms!==this.props.terms&&this.updateSelectedTerms(this.props.terms)}},{key:"fetchTerms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props.taxonomy,a=Object.assign({},Ze,t),i=Qe()({path:Object(Ye.addQueryArgs)("/wp/v2/".concat(n.rest_base),a)});return i.then(tt).then((function(t){e.setState((function(e){return{availableTerms:e.availableTerms.concat(t.filter((function(t){return!Object(qe.find)(e.availableTerms,(function(e){return e.id===t.id}))})))}})),e.updateSelectedTerms(e.props.terms)})),i}},{key:"updateSelectedTerms",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=t.reduce((function(t,n){var a=Object(qe.find)(e.state.availableTerms,(function(e){return e.id===n}));return a&&t.push(a.name),t}),[]);this.setState({selectedTerms:n})}},{key:"onChange",value:function(e){var t=this,n=Object(qe.uniqBy)(e,(function(e){return e.toLowerCase()})).filter((function(e){return Object(qe.find)(t.state.availableTerms,(function(t){return Xe(t.name,e)}))}));this.setState({selectedTerms:n});var a,i;return this.props.onUpdateTerms((a=n,i=this.state.availableTerms,a.map((function(e){return Object(qe.find)(i,(function(t){return Xe(t.name,e)})).id}))),this.props.taxonomy.rest_base)}},{key:"searchTerms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(qe.invoke)(this.searchRequest,["abort"]),this.searchRequest=this.fetchTerms({search:e})}},{key:"render",value:function(){var e=this.props,t=e.slug,n=e.taxonomy;if(!e.hasAssignAction)return null;var a=this.state,i=a.loading,o=a.availableTerms,r=a.selectedTerms,s=o.map((function(e){return e.name})),c=Object(qe.get)(n,["labels","add_new_item"],"post_tag"===t?Object(Ge.__)("Add New Tag"):Object(Ge.__)("Add New Term")),u=Object(qe.get)(n,["labels","singular_name"],"post_tag"===t?Object(Ge.__)("Tag"):Object(Ge.__)("Term")),p=Object(Ge.sprintf)(Object(Ge._x)("%s added","term"),u),d=Object(Ge.sprintf)(Object(Ge._x)("%s removed","term"),u),m=Object(Ge.sprintf)(Object(Ge._x)("Remove %s","term"),u);return Object(l.createElement)(_.FormTokenField,{value:r,suggestions:s,onChange:this.onChange,onInputChange:this.searchTerms,maxSuggestions:20,disabled:i,label:c,messages:{added:p,removed:d,remove:m}})}}]),t}(l.Component),at=Object(Ve.compose)(Object(G.withSelect)((function(e,t){var n=t.slug,a=e("core/editor").getCurrentPost,i=(0,e("core").getTaxonomy)(n);return{hasCreateAction:!!i&&Object(qe.get)(a(),["_links","wp:action-create-"+i.rest_base],!1),hasAssignAction:!!i&&Object(qe.get)(a(),["_links","wp:action-assign-"+i.rest_base],!1),terms:i?e("core/editor").getEditedPostAttribute(i.rest_base):[],taxonomy:i}})),Object(G.withDispatch)((function(e){return{onUpdateTerms:function(t,n){e("core/editor").editPost(We()({},n,t))}}})))(nt);function it(e){return function(t){var n=["p4-page-type","post_tag"].includes(t.slug);return wp.element.createElement(n?at:e,t)}}var ot=function(e){function t(e){return r()(this,t),p()(this,m()(t).call(this,e))}return f()(t,e),c()(t,[{key:"renderEdit",value:function(){var e=wp.i18n.__;return Object(l.createElement)(l.Fragment,null,Object(l.createElement)("div",null,Object(l.createElement)(_.TextControl,{label:e("Spreadsheet URL","planet4-blocks-backend"),placeholder:e("Enter Google Spreadsheet URL","planet4-blocks-backend"),help:e('\n            From Your Google Spreadsheet Table choose File -> Publish on web.\n            No need to choose the output format, any of them will work.\n            If you make changes to the sheet after publishing then these changes do not always immediately get reflected,\n            even when "Automatically republish when changes are made" is checked. You can force an update by unpublishing\n            and republishing the sheet. This will not change the sheet\'s public url.\n            ',"planet4-blocks-backend"),value:this.props.url,onChange:this.props.onUrlChange})))}},{key:"render",value:function(){return Object(l.createElement)("div",null,this.props.isSelected?this.renderEdit():null,Object(l.createElement)(v,{showBar:this.props.isSelected},Object(l.createElement)(_.ServerSideRender,{block:"planet4-blocks/spreadsheet",attributes:{url:this.props.url}})))}}]),t}(l.Component),rt=n(23),lt=n(21);var st=Object(Ve.withInstanceId)((function(e){var t=e.label,n=e.className,a=e.value,o=e.help,r=e.instanceId,s=e.onChange,c=e.options,u=void 0===c?[]:c,p=k()(e,["label","className","value","help","instanceId","onChange","options"]),d="inspector-color-palette-control-".concat(r);return!Object(qe.isEmpty)(u)&&Object(l.createElement)(_.BaseControl,{label:t,id:d,help:o,className:O()(n,"components-color-palette-control")},Object(l.createElement)(_.ColorPalette,i()({value:a,onChange:s,colors:u},p)))})),ct=function(e){switch(e){case _.RadioControl:return"selected"}return"value"};function ut(e){var t=function(t){function n(t){var a;return r()(this,n),(a=p()(this,m()(n).call(this,t))).handleChange=a.handleChange.bind(g()(a)),a.valuePropName=ct(e),a}return f()(n,t),c()(n,[{key:"handleChange",value:function(e,t){this.props.writeMeta(e,t)}},{key:"render",value:function(){var t,n,a=this,o=this.props,r=o.metaKey,s=o.postMeta,c=(o.writeMeta,o.onChange),u=k()(o,["metaKey","postMeta","writeMeta","onChange"]),p=s[r];return n=!this.props.defaultValue||p&&this.props.options.some((function(e){return e.value===p}))?p:this.props.defaultValue,Object(l.createElement)(e,i()({},(t={},We()(t,this.valuePropName,n),We()(t,"onChange",(function(e){a.handleChange(r,e||""),c&&c(e)})),t),u))}}]),n}(l.Component);return Object(Ve.compose)(Object(G.withSelect)((function(e){return{postMeta:e("core/editor").getEditedPostAttribute("meta")}})),Object(G.withDispatch)((function(e){return{writeMeta:function(t,n){e("core/editor").editPost({meta:We()({},t,n)})}}})))(t)}var pt=function(e,t){if(!e)return null;var n=e.fields.find((function(e){return e.id===t}));return n?n.dependsOn?dt(e,n):n:null},dt=function e(t,n){var a=t.fields.find((function(e){return e.id===n.dependsOn}));if(!a)return null;var i=wp.data.select("core/editor").getEditedPostAttribute("meta");if(!i)return null;var o=a.dependsOn?e(t,a):a;if(!o)return null;var r=i[n.dependsOn];o&&(o.options&&o.options.find((function(e){return e.value===r}))||(r=o.default));return r?n.configurations[r]:null};function mt(e){return function(t){function n(e){var t;return r()(this,n),(t=p()(this,m()(n).call(this,e))).state={dependencyValue:null},t}return f()(n,t),c()(n,[{key:"componentDidMount",value:function(){var e=this,t=pt(this.props.theme,this.props.metaKey);if(t&&t.dependsOn){var n=theme.fields.find((function(e){return e.id===t.dependsOn}));if(!n)return;wp.data.subscribe((function(){var a=wp.data.select("core/editor").getEditedPostAttribute("meta");if(a){var i=a[t.dependsOn]||n.default;i!==e.state.dependencyValue&&e.setState((function(e){return ve()({dependencyValue:i},e)}))}}))}}},{key:"render",value:function(){var t=this.props,n=t.theme,a=k()(t,["theme"]);if(!n)return Object(l.createElement)(e,a);var o=pt(n,a.metaKey);return o&&o.options?Object(l.createElement)(e,i()({defaultValue:o.default,options:o.options},a)):null}}]),n}(l.Component)}var ht,gt=n(22),bt=n.n(gt),ft=[{value:"",label:"Default"},{value:"antarctic",label:"Antarctic"},{value:"arctic",label:"Arctic"},{value:"climate",label:"Climate Emergency"},{value:"forest",label:"Forest"},{value:"oceans",label:"Oceans"},{value:"oil",label:"Oil"},{value:"plastic",label:"Plastics"}],vt=ut(_.SelectControl),_t=Object(Ve.compose)(mt,ut)(_.SelectControl),yt=Object(Ve.compose)(mt,ut)(_.RadioControl),kt=Object(Ve.compose)(mt,ut)(st),Ct=function(e){function t(e){var n;return r()(this,t),(n=p()(this,m()(t).call(this,e))).state={theme:null,meta:null},n.handleThemeChange=n.handleThemeChange.bind(g()(n)),n}return f()(t,e),c()(t,null,[{key:"getId",value:function(){return"planet4-campaign-sidebar"}},{key:"getIcon",value:function(){return"admin-appearance"}}]),c()(t,[{key:"componentDidMount",value:function(){var e=this;wp.data.subscribe((function(){var t=wp.data.select("core/editor").getEditedPostAttribute("meta");if(t){var n=t.theme;""===n&&(n="default"),bt()(e.state.meta,t)||(e.setState((function(e){return{meta:t,theme:e.theme}})),null!==e.state.theme&&n===e.state.theme.id||e.loadTheme(n))}}))}},{key:"handleThemeChange",value:function(e){this.loadTheme(e)}},{key:"loadTheme",value:function(e){var t=this;""!==e&&e||(e="default");var n=window.location.href.split("/wp-admin")[0],a="".concat(n,"/wp-content/themes/planet4-master-theme/campaign_themes/").concat(e,".json");console.log("fetching theme ".concat(e)),fetch(a).then((function(e){return e.json()})).then((function(e){t.setState((function(t){return{theme:e,meta:t.meta}}))}))}},{key:"render",value:function(){return Object(l.createElement)(l.Fragment,null,Object(l.createElement)(lt.PluginSidebarMoreMenuItem,{target:t.getId(),icon:t.getIcon()},"Campaign Options"),Object(l.createElement)(lt.PluginSidebar,{name:t.getId(),title:Object(Ge.__)("Campaign Options","planet4-blocks-backend")},Object(l.createElement)("div",{className:"components-panel__body is-opened"},Object(l.createElement)(vt,{metaKey:"theme",label:Object(Ge.__)("Theme","planet4-blocks-backend"),onChange:this.handleThemeChange,options:ft})),Object(l.createElement)(_.PanelBody,{title:Object(Ge.__)("Navigation","planet4-blocks-backend"),initialOpen:!0},Object(l.createElement)(yt,{metaKey:"campaign_nav_type",theme:this.state.theme}),Object(l.createElement)(kt,{metaKey:"campaign_nav_color",label:Object(Ge.__)("Navigation Background Color","planet4-blocks-backend"),disableCustomColors:!0,clearable:!1,theme:this.state.theme}),Object(l.createElement)(yt,{metaKey:"campaign_nav_border",label:Object(Ge.__)("Navigation bottom border","planet4-blocks-backend"),theme:this.state.theme}),Object(l.createElement)(_t,{metaKey:"campaign_logo",label:Object(Ge.__)("Logo","planet4-blocks-backend"),theme:this.state.theme}),Object(l.createElement)(yt,{metaKey:"campaign_logo_color",label:Object(Ge.__)("Logo Color","planet4-blocks-backend"),help:Object(Ge.__)("Change the campaign logo color (if not default)","planet4-blocks-backend"),theme:this.state.theme})),Object(l.createElement)(_.PanelBody,{title:Object(Ge.__)("Fonts","planet4-blocks-backend"),initialOpen:!0},Object(l.createElement)(_t,{metaKey:"campaign_header_primary",label:Object(Ge.__)("Header Primary Font","planet4-blocks-backend"),theme:this.state.theme}),Object(l.createElement)(_t,{metaKey:"campaign_body_font",label:Object(Ge.__)("Body Font","planet4-blocks-backend"),theme:this.state.theme})),Object(l.createElement)(_.PanelBody,{title:Object(Ge.__)("Footer","planet4-blocks-backend"),initialOpen:!0},Object(l.createElement)(yt,{metaKey:"campaign_footer_theme",label:Object(Ge.__)("Footer background color","planet4-blocks-backend"),theme:this.state.theme}),Object(l.createElement)(kt,{metaKey:"footer_links_color",label:Object(Ge.__)("Footer links color","planet4-blocks-backend"),disableCustomColors:!0,clearable:!1,theme:this.state.theme}))))}}]),t}(l.Component),Ot=document.documentElement,Et=function(){return wp.data.select("core/editor").getEditedPostAttribute("meta")},jt=[{metaKey:"campaign_body_font",cssVariable:"--body-font"},{metaKey:"campaign_header_primary",cssVariable:"--header-primary-font",transform:function(e){if("Montserrat_Light"===e)return"Montserrat";if(e)return e;return{default:'"Roboto", sans-serif',antarctic:'"Sanctuary", sans-serif',arctic:'"Save the Arctic", sans-serif',climate:'"Jost", sans-serif',forest:'"Kanit", sans-serif',oceans:'"Montserrat", sans-serif',oil:'"Anton", sans-serif',plastic:'"Montserrat", sans-serif'}[Et().theme||"default"]}}];new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/articles",{title:"Articles",icon:"excerpt-view",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_articles",attributes:{article_heading:{type:"string",shortcode:function(e){return e.named.article_heading}},articles_description:{type:"string",shortcode:function(e){return e.named.articles_description}},article_count:{type:"string",shortcode:function(e){return e.named.article_count}},read_more_text:{type:"string",shortcode:function(e){return e.named.read_more_text}},read_more_link:{type:"string",shortcode:function(e){return e.named.read_more_link}},button_link_new_tab:{type:"string",shortcode:function(e){return e.named.button_link_new_tab}},ignore_categories:{type:"boolean",shortcode:function(e){return e.named.ignore_categories}},tags:{type:"string",shortcode:function(e){return e.named.tags?e.named.tags.split(","):[]}},post_types:{type:"string",shortcode:function(e){return e.named.tags?e.named.post_types.split(","):[]}},posts:{type:"string",shortcode:function(e){return e.named.tags?e.named.posts.split(","):[]}},exclude_post_id:{type:"integer",shortcode:function(e){return Number(e.named.exclude_post_id)}}}}]},attributes:{article_heading:{type:"string"},articles_description:{type:"string"},article_count:{type:"integer",default:3},tags:{type:"array",default:[]},posts:{type:"array",default:[]},post_types:{type:"array",default:[]},read_more_text:{type:"string"},read_more_link:{type:"string",default:""},button_link_new_tab:{type:"boolean",default:!1},ignore_categories:{type:"boolean",default:!1},exclude_post_id:{type:"integer",default:""}},edit:(0,wp.data.withSelect)((function(e){var t={hide_empty:!1,per_page:50},n=e("core").getEntityRecords,a=n("taxonomy","post_tag",t);return{postTypesList:n("taxonomy","p4-page-type",t),tagsList:a}}))((function(e){var t=e.postTypesList,n=e.tagsList,a=e.isSelected,o=e.attributes,r=e.setAttributes;if(!n||!t)return"Populating block's fields...";if(n&&0===n.length&&t&&0===t.length)return"Populating block's fields...";return Object(l.createElement)(x,i()({},o,{isSelected:a,tagsList:n,postTypesList:t,onSelectedTagsChange:function(e){r({tags:e})},onTitleChange:function(e){r({article_heading:e})},onDescriptionChange:function(e){r({articles_description:e})},onCountChange:function(e){r({article_count:Number(e)})},onSelectedPostsChange:function(e){r({posts:e})},onSelectedPostTypesChange:function(e){r({post_types:e})},onReadmoretextChange:function(e){r({read_more_text:e})},onReadmorelinkChange:function(e){r({read_more_link:e})},onButtonLinkTabChange:function(e){r({button_link_new_tab:e})},onIgnoreCategoriesChange:function(e){r({ignore_categories:e})}}))})),save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/carousel-header",{title:"Carousel Header",icon:"welcome-widgets-menus",category:"planet4-blocks",supports:{multiple:!1},transforms:{from:[{type:"shortcode",tag:"shortcake_carousel_header",attributes:{block_style:{type:"string",shortcode:function(e){return Number(e.named.block_style)}},carousel_autoplay:{type:"boolean",shortcode:function(e){return e.named.carousel_autoplay}},slides:{type:"array",shortcode:function(e){var t=function(e){switch(e){case"left top":return{x:0,y:0};case"center top":return{x:.5,y:0};case"right top":return{x:1,y:0};case"left center":return{x:0,y:.5};case"center center":return{x:.5,y:.5};case"right center":return{x:1,y:.5};case"left bottom":return{x:0,y:1};case"center bottom":return{x:.5,y:1};case"right bottom":return{x:1,y:1}}},n=[];if(e.named.image_1){var a={image:Number(e.named.image_1),header:e.named.header_1,header_size:e.named.header_size_1,subheader:e.named.subheader_1,description:e.named.description_1,link_text:e.named.link_text_1,link_url:e.named.link_url_1,focal_points:t(e.named.focus_image_1)};if(n.push(Object.assign({},a)),e.named.image_2){var i={image:Number(e.named.image_2),header:e.named.header_2,header_size:e.named.header_size_2,subheader:e.named.subheader_2,description:e.named.description_2,link_text:e.named.link_text_2,link_url:e.named.link_url_2,focal_points:t(e.named.focus_image_2)};if(n.push(Object.assign({},i)),e.named.image_3){var o={image:Number(e.named.image_3),header:e.named.header_3,header_size:e.named.header_size_3,subheader:e.named.subheader_3,description:e.named.description_3,link_text:e.named.link_text_3,link_url:e.named.link_url_3,focal_points:t(e.named.focus_image_3)};if(n.push(Object.assign({},o)),e.named.image_4){var r={image:Number(e.named.image_4),header:e.named.header_4,header_size:e.named.header_size_4,subheader:e.named.subheader_4,description:e.named.description_4,link_text:e.named.link_text_4,link_url:e.named.link_url_4,focal_points:t(e.named.focus_image_4)};n.push(Object.assign({},r))}}}}return n}}}}]},attributes:{block_style:{type:"string"},carousel_autoplay:{type:"boolean"},slides:{type:"array",default:[{image:null,focal_points:{},header:"",header_size:"h1",subheader:"",description:"",link_text:"",link_url:"",link_url_new_tab:!1}]}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(M,i()({},n,{isSelected:t,onBlockStyleChange:function(e){a({block_style:e})},onCarouselAutoplayChange:function(e){a({carousel_autoplay:e})},onTitleChange:function(e){a({title:e})},onImageChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].image=null!==t?t:null,a({slides:i})},onHeaderChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].header=t,a({slides:i})},onSubheaderChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].subheader=t,a({slides:i})},onHeaderSizeChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].header_size=t,a({slides:i})},onDescriptionChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].description=t,a({slides:i})},onLinkTextChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].link_text=t,a({slides:i})},onLinkUrlChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].link_url=t,a({slides:i})},onLinkNewTabChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));i[e].link_url_new_tab=t,a({slides:i})},onFocalPointsChange:function(e,t){var i=JSON.parse(JSON.stringify(n.slides));if(null!==t){var o=JSON.parse(JSON.stringify(t));i[e].focal_points=o}else i[e].focal_points=null;a({slides:i})},addSlide:function(){a({slides:n.slides.concat({image:null,focal_points:{},header:"",header_size:"h1",subheader:"",description:"",link_text:"",link_url:"",link_url_new_tab:!1})})},removeSlide:function(){a({slides:n.slides.slice(0,-1)})}}))},save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/columns",{title:V("Columns","p4ge"),icon:"grid-view",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_columns",attributes:{columns_block_style:{type:"string",shortcode:function(e){var t=e.named.columns_block_style;return void 0===t?"":t}},columns_title:{type:"string",shortcode:function(e){var t=e.named.columns_title;return void 0===t?"":t}},columns_description:{type:"string",shortcode:function(e){var t=e.named.columns_description;return void 0===t?"":t}},columns:{type:"array",shortcode:function(e){var t=[];if(e.named.title_1){var n={title:e.named.title_1,description:e.named.description_1||""};if("no_image"!==e.named.columns_block_style&&(n.attachment=e.named.attachment_1||!1),n.cta_link=e.named.link_1||"",n.link_new_tab=e.named.link_new_tab_1||!1,n.cta_text=e.named.cta_text_1||"",t.push(Object.assign({},n)),e.named.title_2){var a={title:e.named.title_2,description:e.named.description_2||""};if("no_image"!==e.named.columns_block_style&&(a.attachment=e.named.attachment_2||!1),a.cta_link=e.named.link_2||"",a.link_new_tab=e.named.link_new_tab_2||!1,a.cta_text=e.named.cta_text_2||"",t.push(Object.assign({},a)),e.named.title_3){var i={title:e.named.title_3,description:e.named.description_3||""};if("no_image"!==e.named.columns_block_style&&(i.attachment=e.named.attachment_3||!1),i.cta_link=e.named.link_3||"",i.link_new_tab=e.named.link_new_tab_3||!1,i.cta_text=e.named.cta_text_3||"",t.push(Object.assign({},i)),e.named.title_4){var o={title:e.named.title_4,description:e.named.description_4||""};"no_image"!==e.named.columns_block_style&&(o.attachment=e.named.attachment_4||!1),o.cta_link=e.named.link_4||"",o.link_new_tab=e.named.link_new_tab_4||!1,o.cta_text=e.named.cta_text_4||"",t.push(Object.assign({},o))}}}}return t}}}}]},attributes:{columns_block_style:{type:"string"},columns_title:{type:"string"},columns_description:{type:"string"},columns:{type:"array",default:[],title:{type:"string"},description:{type:"string"},attachment:{type:"integer"},cta_link:{type:"string"},link_new_tab:{type:"boolean"},cta_text:{type:"string"}}},edit:Object(G.withSelect)((function(e,t){var n=t.attributes.columns,a=[];if(n&&0<n.length){var i=!0,o=!1,r=void 0;try{for(var l,s=n[Symbol.iterator]();!(i=(l=s.next()).done);i=!0){var c=l.value;if(c.attachment&&0<c.attachment)e("core").getMedia(c.attachment)&&(a[c.attachment]=e("core").getMedia(c.attachment).source_url)}}catch(e){o=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(o)throw r}}}return{column_img:a}}))((function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes,o=e.column_img;return Object(l.createElement)(q,i()({},n,{isSelected:t,onSelectedLayoutChange:function(e){if(a({columns_block_style:e}),"no_image"===e){var t=n.columns;if(0<t.length){var i,o=J()(t);for(i=0;i<t.length;i++)o[i].attachment=0;a({columns:o})}}},onTitleChange:function(e){a({columns_title:e})},onDescriptionChange:function(e){a({columns_description:e})},onSelectImage:function(e,t){var i=t.id,o=JSON.parse(JSON.stringify(n.columns));o[e].attachment=i,a({columns:o})},addColumn:function(){var e=n.columns;e.length<4&&a({columns:[].concat(J()(e),[{title:"",description:"",attachment:0,cta_link:"",cta_text:"",link_new_tab:""}])})},removeColumn:function(){a({columns:n.columns.slice(0,-1)})},onColumnHeaderChange:function(e,t){var i=JSON.parse(JSON.stringify(n.columns));i[e].title=t,a({columns:i})},onColumnDescriptionChange:function(e,t){var i=JSON.parse(JSON.stringify(n.columns));i[e].description=t,a({columns:i})},onCTALinkChange:function(e,t){var i=JSON.parse(JSON.stringify(n.columns));i[e].cta_link=t,a({columns:i})},onLinkNewTabChange:function(e,t){var i=JSON.parse(JSON.stringify(n.columns));i[e].link_new_tab=t,a({columns:i})},onCTAButtonTextChange:function(e,t){var i=JSON.parse(JSON.stringify(n.columns));i[e].cta_text=t,a({columns:i})},column_img:o,onDeleteImage:function(e){var t=JSON.parse(JSON.stringify(n.columns));t[e].attachment=0,a({columns:t})}}))})),save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/cookies",{title:"Cookies",icon:"welcome-view-site",category:"planet4-blocks",supports:{multiple:!1},transforms:{from:[{type:"shortcode",tag:"shortcake_cookies",attributes:{title:{type:"string",shortcode:function(e){return e.named.title}},description:{type:"string",shortcode:function(e){return e.named.description}},necessary_cookies_name:{type:"string",shortcode:function(e){return e.named.necessary_cookies_name}},necessary_cookies_description:{type:"string",shortcode:function(e){return e.named.necessary_cookies_description}},all_cookies_name:{type:"string",shortcode:function(e){return e.named.all_cookies_name}},all_cookies_description:{type:"string",shortcode:function(e){return e.named.all_cookies_description}}}}]},attributes:{title:{type:"string"},description:{type:"string"},necessary_cookies_name:{type:"string"},necessary_cookies_description:{type:"string"},all_cookies_name:{type:"string"},all_cookies_description:{type:"string"}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(K,i()({},n,{isSelected:t,onTitleChange:function(e){a({title:e})},onDescriptionChange:function(e){a({description:e})},onNecessaryCookiesNameChange:function(e){a({necessary_cookies_name:e})},onNecessaryCookiesDescriptionChange:function(e){a({necessary_cookies_description:e})},onAllCookiesNameChange:function(e){a({all_cookies_name:e})},onAllCookiesDescriptionChange:function(e){a({all_cookies_description:e})}}))},save:function(){return null}})},new function e(){r()(this,e);var t=wp.blocks.registerBlockType;wp.data.withSelect;t("planet4-blocks/counter",{title:"Counter",icon:"dashboard",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_counter",attributes:{style:{type:"string",shortcode:function(e){var t=e.named.style;return void 0===t?"plain":t}},title:{type:"string",shortcode:function(e){var t=e.named.title;return void 0===t?"":t}},description:{type:"string",shortcode:function(e){var t=e.named.description;return void 0===t?"":t}},completed:{type:"integer",shortcode:function(e){var t=e.named.completed;return Number(void 0===t?0:t)}},completed_api:{type:"string",shortcode:function(e){var t=e.named.completed_api,n=void 0===t?"":t;return""===n?null:n}},target:{type:"integer",shortcode:function(e){var t=e.named.target;return Number(void 0===t?0:t)}},text:{type:"string",shortcode:function(e){var t=e.named.text;return void 0===t?"":t}}}}]},attributes:{title:{type:"string"},description:{type:"string"},style:{type:"string",default:"plain"},completed:{type:"integer"},completed_api:{type:"string"},target:{type:"integer"},text:{type:"string"}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(Z,i()({},n,{isSelected:t,onTitleChange:function(e){a({title:e})},onDescriptionChange:function(e){a({description:e})},onSelectedLayoutChange:function(e){a({style:e})},onCompletedChange:function(e){a({completed:Number(e)})},onCompletedAPIChange:function(e){a({completed_api:e})},onTargetChange:function(e){a({target:Number(e)})},onTextChange:function(e){a({text:e})}}))},save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/covers",{title:"Covers",icon:"slides",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_newcovers",attributes:{cover_type:{type:"string",shortcode:function(e){var t=e.named.cover_type;return void 0===t?"1":t}},title:{type:"string",shortcode:function(e){var t=e.named.title;return void 0===t?"":t}},description:{type:"string",shortcode:function(e){var t=e.named.description;return void 0===t?"":t}},covers_view:{type:"string",shortcode:function(e){switch(e.named.covers_view){case"0":return"1";case"3":return"2";case"1":return"3"}return"1"}},tags:{type:"array",shortcode:function(e){var t=e.named.tags;return(void 0===t?"":t).split(",").map((function(e){return Number(e)})).filter((function(e){return e>0}))}},post_types:{type:"array",shortcode:function(e){var t=e.named.post_types;return(void 0===t?"":t).split(",").map((function(e){return Number(e)})).filter((function(e){return e>0}))}},posts:{type:"array",shortcode:function(e){var t=e.named.posts;return(void 0===t?"":t).split(",").map((function(e){return Number(e)})).filter((function(e){return e>0}))}}}}]},attributes:{title:{type:"string"},description:{type:"string"},tags:{type:"array",default:[]},posts:{type:"array",default:[]},post_types:{type:"array",default:[]},covers_view:{type:"string",default:"1"},cover_type:{type:"string"}},edit:(0,wp.data.withSelect)((function(e){var t=e("core").getEntityRecords,n=t("taxonomy","post_tag",{hide_empty:!1,per_page:-1});return{postTypesList:t("taxonomy","p4-page-type"),tagsList:n}}))((function(e){var t=e.postTypesList,n=e.tagsList,a=e.isSelected,o=e.attributes,r=e.setAttributes;if(!n||!t)return"Populating block's fields...";if(!n&&0===!n.length)return"No tags...";return Object(l.createElement)(ae,i()({},o,{isSelected:a,tagsList:n,postTypesList:t,onSelectedTagsChange:function(e){r({tags:e})},onSelectedLayoutChange:function(e){"1"===e&&r({post_types:[]}),"2"===e&&r({post_types:[]}),r({cover_type:e,posts:[]})},onTitleChange:function(e){r({title:e})},onDescriptionChange:function(e){r({description:e})},onSelectedPostsChange:function(e){r({posts:e})},onSelectedPostTypesChange:function(e){r({post_types:e})},onRowsChange:function(e){r({covers_view:e})}}))})),save:function(){return null}})},new function e(){r()(this,e);var t=wp.blocks.registerBlockType,n=wp.i18n.__,a=wp.data.withSelect;t("planet4-blocks/gallery",{title:n("Gallery","p4ge"),icon:"format-gallery",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_gallery",attributes:{gallery_block_style:{type:"integer",shortcode:function(e){var t=e.named.gallery_block_style;return Number(void 0===t?"":t)}},gallery_block_title:{type:"string",shortcode:function(e){var t=e.named.gallery_block_title;return void 0===t?"":t}},gallery_block_description:{type:"string",shortcode:function(e){var t=e.named.gallery_block_description;return void 0===t?"":t}},multiple_image:{type:"string",shortcode:function(e){var t=e.named.multiple_image;return void 0===t?"":t}},gallery_block_focus_points:{type:"string",shortcode:function(e){var t=e.named.gallery_block_focus_points;return void 0===t?"":t}}}}]},attributes:{gallery_block_style:{type:"number",default:1},gallery_block_title:{type:"string"},gallery_block_description:{type:"string"},multiple_image:{type:"string"},gallery_block_focus_points:{type:"string"},image_data:{type:"array",default:[{id:null,url:null,focalPoint:{}}]}},edit:a((function(e,t){var n=t.attributes.multiple_image,a=[];if(n){var i=n.split(",");$.each(i,(function(t,n){var i=e("core").getMedia(n);i&&(a[n]=i.source_url)}))}return{image_urls_array:a}}))((function(e){var t=e.image_urls_array,n=e.isSelected,a=e.attributes,o=e.setAttributes,r=a.image_data,s=a.gallery_block_focus_points;if(0==r.length&&0<t.length){var c=[],u=s?JSON.parse(s):{};for(var p in t){var d=void 0,m=void 0;if($.isEmptyObject(u)||!u[p])d=50,m=50;else{var h=u[p].replace(/\%/g,"").split(" "),g=oe()(h,2);d=g[0],m=g[1]}c.push({url:t[p],focalPoint:{x:parseInt(d)/100,y:parseInt(m)/100},id:p})}o({image_data:c})}return Object(l.createElement)(se,i()({},a,{isSelected:n,onSelectedLayoutChange:function(e){o({gallery_block_style:Number(e)})},onSelectImage:function(e){var t=[],n=[];for(var a in e){t.push(e[a].id);var i=e[a].id;n.push({url:e[a].url,focalPoint:{x:.5,y:.5},id:i})}o({multiple_image:t.join(",")}),o({image_data:n})},onTitleChange:function(e){o({gallery_block_title:e})},onDescriptionChange:function(e){o({gallery_block_description:e})},onFocalPointChange:function(e,t){var n=[],a={};r.map((function(i){if(i.id===e){var o=parseFloat(t.x).toFixed(2),r=parseFloat(t.y).toFixed(2);n.push({url:i.url,focalPoint:{x:o,y:r},id:e}),a[e]=100*o+"% "+100*r+"%"}else{n.push(i);var l=i.id;a[l]=parseInt(100*i.focalPoint.x)+"% "+parseInt(100*i.focalPoint.y)+"%"}})),o({gallery_block_focus_points:JSON.stringify(a)}),o({image_data:n})},onRemoveImages:function(){o({multiple_image:""}),o({gallery_block_focus_points:""}),o({image_data:[]})},onDeleteImage:function(e){var t=a.multiple_image,n=a.image_data;t&&(t=t.split(",")),t=t.filter((function(t,n,a){return parseInt(t)!==parseInt(e)})),n=n.filter((function(t,n,a){return parseInt(t.id)!==parseInt(e)})),o({multiple_image:t.join(",")}),o({image_data:n})}}))})),save:function(){return null}})},new function e(){r()(this,e);var t=wp.blocks.registerBlockType,n=wp.i18n.__,a=wp.data.withSelect;t("planet4-blocks/happypoint",{title:n("Happypoint","p4ge"),icon:"format-image",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_happy_point",attributes:{opacity:{type:"integer",shortcode:function(e){var t=e.named.opacity;return void 0===t?"":t}},id:{type:"integer",shortcode:function(e){var t=e.named.background;return Number(t)}},focus_image:{type:"string",shortcode:function(e){var t=e.named.focus_image;return void 0===t?"":t}},mailing_list_iframe:{type:"boolean",shortcode:function(e){return"true"==e.named.mailing_list_iframe}},iframe_url:{type:"string",shortcode:function(e){var t=e.named.iframe_url;return void 0===t?"":t}}}}]},attributes:{focus_image:{type:"string"},opacity:{type:"number",default:60},mailing_list_iframe:{type:"boolean"},iframe_url:{type:"string"},id:{type:"number"},load_iframe:{type:"boolean",default:!1}},edit:a((function(e,t){var n=t.attributes.id,a="";return n&&0<n&&(a=e("core").getMedia(n))&&(a=a.source_url),{img_url:a}}))((function(e){var t=e.img_url,n=e.isSelected,a=e.attributes,o=e.setAttributes;return Object(l.createElement)(ce,i()({},a,{isSelected:n,url:t,onSelectImage:function(e){var t=e.id;o({id:t})},onOpacityChange:function(e){o({opacity:e})},onMailingListIframeChange:function(e){o({mailing_list_iframe:e})},onIframeUrlChange:function(e){o({iframe_url:e})},onFocalPointChange:function(e){var t=e.x,n=e.y;t=parseFloat(t).toFixed(2),n=parseFloat(n).toFixed(2),o({focus_image:100*t+"% "+100*n+"%"})},onRemoveImages:function(){o({id:-1}),o({focus_image:""})}}))})),save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/media-video",{title:me("Media block","p4ge"),icon:"format-video",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_media_video",attributes:{video_title:{type:"string",shortcode:function(e){var t=e.named.video_title;return void 0===t?"":t}},description:{type:"string",shortcode:function(e){var t=e.named.description;return void 0===t?"":t}},youtube_id:{type:"string",shortcode:function(e){var t=e.named.youtube_id;return void 0===t?"":t}},video_poster_img:{type:"integer",shortcode:function(e){var t=e.named.video_poster_img;return void 0===t?"":t}}}}]},attributes:{video_title:{type:"string"},description:{type:"string"},youtube_id:{type:"string"},video_poster_img:{type:"integer"}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(de,i()({},n,{isSelected:t,onTitleChange:function(e){a({video_title:e})},onDescriptionChange:function(e){a({description:e})},onMediaUrlChange:function(e){a({youtube_id:e})},onSelectImage:function(e){var t=e.id;a({video_poster_img:t})},onSelectURL:function(e){e.url,a({id:null})},onUploadError:function(e){var t=e.message;console.log(t)}}))},save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/social-media",{title:(0,wp.i18n.__)("Social Media","p4ge"),icon:"share",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_social_media",attributes:{title:{type:"string",shortcode:function(e){return e.named.title}},description:{type:"string",shortcode:function(e){return e.named.description}},embed_type:{type:"string",shortcode:function(e){return e.named.embed_type}},facebook_page_tab:{type:"string",shortcode:function(e){return e.named.facebook_page_tab}},social_media_url:{type:"string",shortcode:function(e){return e.named.social_media_url}},alignment_class:{type:"string",shortcode:function(e){return e.named.alignment_class}}}}]},attributes:{title:{type:"string",default:""},description:{type:"string",default:""},embed_type:{type:"string",default:"oembed"},facebook_page_tab:{type:"string",default:"timeline"},social_media_url:{type:"string",default:""},alignment_class:{type:"string",default:""}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(be,i()({},n,{isSelected:t,onTitleChange:function(e){a({title:e})},onDescriptionChange:function(e){a({description:e})},onEmbedTypeChange:function(e){a({embed_type:e})},onFacebookPageTabChange:function(e){a({facebook_page_tab:e})},onSocialMediaUrlChange:function(e){a({social_media_url:e})},onAlignmentChange:function(e){a({alignment_class:e})}}))},save:function(){return null}})},new function e(){r()(this,e);var t=wp.blocks.registerBlockType,n=wp.i18n.__,a=wp.data.withSelect;t("planet4-blocks/social-media-cards",{title:n("Social Media Cards","planet4-blocks-backend"),icon:"format-image",category:"planet4-blocks",attributes:{title:{type:"string",default:""},description:{type:"string",default:""},cards:{type:"array",default:[],image_id:{type:"int"},message:{type:"string",default:""},social_url:{default:""}}},save:function(){return null},edit:a((function(e,t){return{cards:t.attributes.cards.map((function(t){var n=t.image_id,a=e("core").getMedia(n);return ve()({image_url:a?a.source_url:null},t)}))}}))((function(e){var t=e.cards,n=e.isSelected,a=e.attributes,i=e.setAttributes;return Object(l.createElement)(_e,{attributes:a,cards:t,isSelected:n,onTitleChange:function(e){i({title:e})},onDescriptionChange:function(e){i({description:e})},onSelectImages:function(e){var n=e.map((function(e){return e.id})),a=n.filter((function(e){return!t.some((function(t){return t.image_id===e}))})),o=t.filter((function(e){return n.includes(e.image_id)})),r=[].concat(J()(o),J()(a.map((function(e){return{image_id:e,message:"",social_url:""}}))));i({cards:r})},onMessageChange:function(e,t){var n=J()(a.cards);n[e].message=t,i({cards:n})},onURLChange:function(e,t){var n=J()(a.cards);n[e].social_url=t,i({cards:n})},onDeleteImage:function(e){i({cards:t.filter((function(t){return t.image_id!==e}))})}})}))})},new function e(){r()(this,e);var t=wp.blocks.registerBlockType,n=wp.i18n.__,a=wp.data.withSelect;t("planet4-blocks/split-two-columns",{title:n("Split Two Columns","p4ge"),icon:"editor-table",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_split_two_columns",attributes:{select_issue:{type:"integer",shortcode:function(e){var t=e.named.select_issue,n=void 0===t?"":t;return Number(n)>0?Number(n):null}},title:{type:"string",shortcode:function(e){var t=e.named.title;return void 0===t?"":t}},issue_description:{type:"string",shortcode:function(e){var t=e.named.issue_description;return void 0===t?"":t}},issue_link_text:{type:"string",shortcode:function(e){var t=e.named.issue_link_text;return void 0===t?"":t}},issue_link_path:{type:"string",shortcode:function(e){var t=e.named.issue_link_path;return void 0===t?"":t}},issue_image:{type:"integer",shortcode:function(e){var t=e.named.issue_image,n=void 0===t?"":t;return Number(n)>0?Number(n):null}},focus_issue_image:{type:"string",shortcode:function(e){var t=e.named.focus_issue_image;return void 0===t?"":t}},select_tag:{type:"integer",shortcode:function(e){var t=e.named.select_tag,n=void 0===t?"":t;return Number(n)>0?Number(n):null}},tag_description:{type:"string",shortcode:function(e){var t=e.named.tag_description;return void 0===t?"":t}},button_text:{type:"string",shortcode:function(e){var t=e.named.button_text;return void 0===t?"":t}},button_link:{type:"string",shortcode:function(e){var t=e.named.button_link;return void 0===t?"":t}},tag_image:{type:"integer",shortcode:function(e){var t=e.named.tag_image,n=void 0===t?"":t;return Number(n)>0?Number(n):null}},focus_tag_image:{type:"string",shortcode:function(e){var t=e.named.focus_tag_image;return void 0===t?"":t}}}}]},attributes:{select_issue:{type:"number",default:0},title:{type:"string"},issue_description:{type:"string"},issue_link_text:{type:"string"},issue_link_path:{type:"string"},issue_image:{type:"number"},focus_issue_image:{type:"string"},select_tag:{type:"number",default:0},tag_description:{type:"string"},button_text:{type:"string"},button_link:{type:"string"},tag_image:{type:"number"},focus_tag_image:{type:"string"}},edit:a((function(e,t){var n=e("core").getEntityRecords,a=n("taxonomy","post_tag",{hide_empty:!1,per_page:50}),i=n("postType","page",{per_page:-1,sort_order:"asc",sort_column:"post_title",parent:window.p4ge_vars.planet4_options.explore_page,post_status:"publish"}),o=t.attributes,r=o.issue_image,l=o.tag_image,s="";r&&(s=e("core").getMedia(r))&&(s=s.source_url);var c="";return l&&(c=e("core").getMedia(l))&&(c=c.source_url),{tagsList:a,issuepageList:i,issue_image_url:s,tag_image_url:c}}))((function(e){var t=e.tagsList,n=e.issuepageList,a=e.issue_image_url,o=e.tag_image_url,r=e.isSelected,s=e.attributes,c=e.setAttributes;if(!t||!n)return"Populating block's fields...";if(t&&0===t.length||n&&0===n.length)return"Populating block's fields...";return Object(l.createElement)(Oe,i()({},s,{isSelected:r,tagsList:t,issuepageList:n,issue_image_url:a,tag_image_url:o,onSelectIssue:function(e){c({select_issue:parseInt(e)})},onIssueTitleChange:function(e){c({title:e})},onIssueDescriptionChange:function(e){c({issue_description:e})},onIssueLinkTextChange:function(e){c({issue_link_text:e})},onIssueLinkPathChange:function(e){c({issue_link_path:e})},onSelectIssueImage:function(e){var t=e.id;c({issue_image:t})},onIssueImageFocalPointChange:function(e){var t=e.x,n=e.y;c({focus_issue_image:parseInt(100*t)+"% "+parseInt(100*n)+"%"})},onSelectTag:function(e){c({select_tag:parseInt(e)})},onTagDescriptionChange:function(e){c({tag_description:e})},onButtonTextChange:function(e){c({button_text:e})},onButtonLinkChange:function(e){c({button_link:e})},onSelectCampaignImage:function(e){var t=e.id;c({tag_image:t})},onCampaignImageFocalPointChange:function(e){var t=e.x,n=e.y;c({focus_tag_image:parseInt(100*t)+"% "+parseInt(100*n)+"%"})}}))})),save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/spreadsheet",{title:(0,wp.i18n.__)("Spreadsheet","planet4-blocks-backend"),icon:"editor-table",category:"planet4-blocks-beta",attributes:{url:{type:"string",default:""}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(ot,i()({},n,{isSelected:t,onUrlChange:function(e){a({url:e})}}))},save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/submenu",{title:"Submenu",icon:"welcome-widgets-menus",category:"planet4-blocks",supports:{multiple:!1},transforms:{from:[{type:"shortcode",tag:"shortcake_submenu",attributes:{submenu_style:{type:"integer",shortcode:function(e){return Number(e.named.submenu_style)}},title:{type:"string",shortcode:function(e){return e.named.title}},levels:{type:"array",shortcode:function(e){var t=[];if(e.named.heading1>0){var n={heading:Number(e.named.heading1),link:Boolean(e.named.link1)||!1,style:e.named.style1||"none"};if(t.push(Object.assign({},n)),e.named.heading2>0){var a={heading:Number(e.named.heading2),link:Boolean(e.named.link2)||!1,style:e.named.style2||"none"};if(t.push(Object.assign({},a)),e.named.heading3>0){var i={heading:Number(e.named.heading3),link:Boolean(e.named.link3)||!1,style:e.named.style3||"none"};t.push(Object.assign({},i))}}}return t}}}}]},attributes:{submenu_style:{type:"integer",default:1},title:{type:"string"},levels:{type:"array",default:[{heading:0,link:!1,style:"none"}]}},edit:(0,wp.data.withSelect)((function(e){}))((function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(je,i()({},n,{isSelected:t,onSelectedLayoutChange:function(e){a({submenu_style:Number(e)})},onTitleChange:function(e){a({title:e})},onHeadingChange:function(e,t){var i=JSON.parse(JSON.stringify(n.levels));i[e].heading=Number(t),a({levels:i})},onLinkChange:function(e,t){var i=JSON.parse(JSON.stringify(n.levels));i[e].link=t,a({levels:i})},onStyleChange:function(e,t){var i=JSON.parse(JSON.stringify(n.levels));i[e].style=t,a({levels:i})},addLevel:function(){a({levels:n.levels.concat({heading:0,link:!1,style:"none"})})},removeLevel:function(){a({levels:n.levels.slice(0,-1)})}}))})),save:function(){return null}})},new function e(){r()(this,e);var t=wp.blocks.registerBlockType,n=wp.i18n.__,a=wp.data.withSelect;t("planet4-blocks/take-action-boxout",{title:n("Take Action Boxout"),icon:"welcome-widgets-menus",category:"planet4-blocks",supports:{multiple:!1},transforms:{from:[{type:"shortcode",tag:"shortcake_take_action_boxout",attributes:{take_action_page:{type:"integer",shortcode:function(e){return Number(e.named.take_action_page)}},custom_title:{type:"string",shortcode:function(e){return e.named.custom_title}},custom_excerpt:{type:"string",shortcode:function(e){return e.named.custom_excerpt}},custom_link:{type:"string",shortcode:function(e){return e.named.custom_link}},custom_link_text:{type:"string",shortcode:function(e){return e.named.custom_link_text}},custom_link_new_tab:{type:"boolean",shortcode:function(e){return e.named.custom_link_new_tab}},tag_ids:{type:"array",shortcode:function(e){return e.named.tag_ids?e.named.tag_ids.split(",").map((function(e){return Number(e)})).filter((function(e){return e>0})):[]}},background_image:{type:"integer",shortcode:function(e){var t=e.named.background_image,n=void 0===t?"":t;return Number(n)>0?Number(n):0}}}}]},attributes:{take_action_page:{type:"number"},custom_title:{type:"string"},custom_excerpt:{type:"string"},custom_link:{type:"string"},custom_link_text:{type:"string"},custom_link_new_tab:{type:"boolean",default:!1},tag_ids:{type:"array",default:[]},background_image:{type:"number"}},edit:a((function(e,t){var n=e("core"),a=n.getEntityRecords,i=(n.getMedia,a("taxonomy","post_tag",{hide_empty:!1,per_page:50})),o=a("postType","page",{per_page:-1,sort_order:"asc",sort_column:"post_title",parent:window.p4ge_vars.planet4_options.act_page,post_status:"publish"}),r=t.attributes.background_image,l="";return r&&(l=e("core").getMedia(r))&&(l=l.source_url),{actPageList:o,tagsList:i,background_image_url:l}}))((function(e){var t=e.tagsList,n=e.actPageList,a=e.background_image_url,o=e.isSelected,r=e.attributes,s=e.setAttributes;if(!t||!n)return"Populating block's fields...";if(t&&0===t.length||n&&0===n.length)return"Populating block's fields...";return Object(l.createElement)(Te,i()({},r,{isSelected:o,tagsList:t,actPageList:n,background_image_url:a,onSelectTakeActoinPage:function(e){s({take_action_page:e})},onCustomTitleChange:function(e){s({custom_title:e})},onCustomExcerptChange:function(e){s({custom_excerpt:e})},onCustomLinkChange:function(e){s({custom_link:e})},onCustomLinkTextChange:function(e){s({custom_link_text:e})},onCustomLinkNewTabChange:function(e){s({custom_link_new_tab:e})},onButtonLinkTabChange:function(e){s({button_link_new_tab:e})},onSelectedTagsChange:function(e){s({tag_ids:e})},onSelectBackGroundImage:function(e){var t=e.id;s({background_image:t})},onRemoveBackGroundImage:function(){s({background_image:-1})}}))})),save:function(){return null}})},new function e(){r()(this,e),(0,wp.blocks.registerBlockType)("planet4-blocks/timeline",{title:Ne("Timeline","p4ge"),icon:"clock",category:"planet4-blocks",transforms:{from:[{type:"shortcode",tag:"shortcake_timeline",attributes:{timeline_title:{type:"string",shortcode:function(e){return e.named.timeline_title}},description:{type:"string",shortcode:function(e){return e.named.description}},google_sheets_url:{type:"string",shortcode:function(e){return e.named.google_sheets_url}},language:{type:"array",shortcode:function(e){return e.named.language}},timenav_position:{type:"array",shortcode:function(e){return e.named.timenav_position}},start_at_end:{type:"boolean",shortcode:function(e){return e.named.start_at_end}}}}]},attributes:{timeline_title:{type:"string"},description:{type:"string"},google_sheets_url:{type:"string"},language:{type:"string",default:"en"},timenav_position:{type:"string"},start_at_end:{type:"boolean"}},edit:function(e){var t=e.isSelected,n=e.attributes,a=e.setAttributes;return Object(l.createElement)(Ie,i()({},n,{isSelected:t,onTimelineTitleChange:function(e){a({timeline_title:e})},onDescriptionChange:function(e){a({description:e})},onGoogleSheetsUrlChange:function(e){a({google_sheets_url:e})},onLanguageChange:function(e){a({language:e})},onTimenavPositionChange:function(e){a({timenav_position:e})},onStartAtEndChange:function(e){a({start_at_end:e})}}))},save:function(){return null}})},Ae(),function(e){e.element.createElement;var t=e.element.createElement("svg",{width:20,height:20},e.element.createElement("path",{d:"m 11.451024,15.991879 v 1.900559 H 8.6286372 L 6.8191261,15.024528 6.5459915,14.546546 Q 6.4549468,14.444115 6.4208029,14.307552 h -0.03414 l -0.1024233,0.238994 q -0.113806,0.227613 -0.284517,0.500744 L 4.2357343,17.892438 H 1.2995409 V 15.991879 H 2.7562552 L 4.9982324,12.68013 2.8928217,9.5846081 H 1.3336801 V 7.6726705 h 3.1410444 l 1.5819027,2.5947735 q 0.022772,0.04552 0.2617521,0.477987 0.091045,0.102421 0.1251849,0.23899 h 0.03414 q 0.034139,-0.102432 0.1251845,-0.23899 L 6.8874061,10.267444 8.4806875,7.6726705 H 11.405498 V 9.5846081 H 9.982924 l -2.0940281,3.0386179 2.3216401,3.368653 z m 7.249435,-7.7274175 v 2.3444015 h -5.849622 l -0.03415,-0.307279 q -0.04552,-0.318656 -0.04552,-0.5235031 0,-0.7283595 0.295896,-1.3315288 0.295896,-0.6031748 0.739738,-0.9844236 0.443844,-0.3812499 0.95597,-0.7397383 0.512126,-0.3584877 0.955968,-0.6202403 0.443845,-0.2617558 0.739742,-0.6145521 0.295891,-0.3527973 0.295891,-0.7283591 0,-0.4324593 -0.335727,-0.711285 -0.335727,-0.2788267 -0.80233,-0.2788267 -0.580409,0 -1.103918,0.4438464 Q 14.35307,4.3381578 14.102696,4.645436 L 12.907742,3.5984202 q 0.295895,-0.4210809 0.716976,-0.7511204 0.944588,-0.7397375 2.139551,-0.7397375 1.251867,0 2.025745,0.6771454 0.773881,0.6771454 0.773881,1.8038232 0,0.6373144 -0.278825,1.1722012 -0.278822,0.5348868 -0.705595,0.8706133 -0.426771,0.3357272 -0.927519,0.6657667 -0.500747,0.3300361 -0.933209,0.5747178 -0.43246,0.2446817 -0.74543,0.5861006 -0.312966,0.3414178 -0.347105,0.7169762 H 17.26651 V 8.2644615 Z"})),n=e.element.createElement("svg",{width:20,height:20},e.element.createElement("path",{d:"M 11.415572,11.723303 V 13.59208 H 8.6403806 L 6.8611266,10.772129 6.5925593,10.302137 Q 6.5030369,10.201425 6.4694659,10.067141 H 6.4358949 L 6.3351822,10.302137 Q 6.2232813,10.525943 6.0554268,10.79451 L 4.3209317,13.59208 H 1.4338398 V 11.723303 H 2.8661965 L 5.0706822,8.4669311 3.0004802,5.4231745 H 1.4674107 V 3.5432079 h 3.0885176 l 1.5554501,2.5513836 q 0.022381,0.044757 0.2573749,0.4699921 0.089522,0.1007124 0.1230932,0.2349956 h 0.033571 Q 6.5589882,6.6988668 6.6485107,6.5645836 L 6.9282683,6.0945915 8.4949066,3.5432079 H 11.370811 V 5.4231745 H 9.9720247 L 7.9130129,8.4109791 10.195831,11.723303 Z m 7.150588,2.428291 v 2.305198 h -5.751805 l -0.04476,-0.302137 q -0.03357,-0.503563 -0.03357,-0.514753 0,-0.716178 0.290947,-1.309263 0.290948,-0.593086 0.727368,-0.96796 0.436422,-0.374874 0.939986,-0.727368 0.503561,-0.352494 0.939983,-0.60987 0.43642,-0.257377 0.727368,-0.604275 0.290947,-0.3469 0.290947,-0.716178 0,-0.425232 -0.330112,-0.699394 -0.330115,-0.2741619 -0.788916,-0.2741619 -0.570706,0 -1.085457,0.4364219 -0.156665,0.123093 -0.402851,0.425231 L 12.870301,9.5635781 q 0.290948,-0.414039 0.70499,-0.738558 0.895222,-0.727368 2.103773,-0.727368 1.230931,0 1.991869,0.665822 0.760939,0.665821 0.760939,1.7736599 0,0.738558 -0.386064,1.326048 -0.386065,0.587489 -0.939984,0.962363 -0.553918,0.374875 -1.113434,0.699393 -0.559513,0.324518 -0.973554,0.704988 -0.41404,0.380469 -0.458801,0.816891 h 2.596145 v -0.895223 z"}));e.richText.registerFormatType("planet4-blocks/subscript",{title:"Subscript",tagName:"sub",className:null,edit:function(t){return e.element.createElement(e.editor.RichTextToolbarButton,{icon:n,title:"Subscript",isActive:t.isActive,onClick:function(){t.onChange(e.richText.toggleFormat(t.value,{type:"planet4-blocks/subscript"}))},className:"toolbar-button-planet4-subscript"})}});e.richText.registerFormatType("planet4-blocks/superscript",{title:"Superscript",tagName:"sup",className:null,edit:function(n){return e.element.createElement(e.editor.RichTextToolbarButton,{icon:t,title:"Superscript",isActive:n.isActive,onClick:function(){n.onChange(e.richText.toggleFormat(n.value,{type:"planet4-blocks/superscript"}))}})}})}(window.wp),Ue(),Je(),document.addEventListener("DOMContentLoaded",(function(){document.onpaste=function(e){var t=e.target;if(t.matches(".wp-block-button__link, .wp-block-button__link *")&&jQuery(t).closest(".wp-block-button__link").find("a").length){var n=wp.i18n.__;alert(n("You are pasting a link into the button text. Please ensure your clipboard only has text in it. Alternatively you can press control/command + SHIFT + V to paste only the text in your clipboard.","planet4-blocks-backend"))}}})),wp.hooks.addFilter("editor.PostTaxonomyType","planet4-gutenberg-blocks",it),ht=null,wp.data.subscribe((function(){var e=wp.data.select("core/editor").getCurrentPostType();if(e!==ht){ht=e;var t=function(e){switch(e){case"campaign":return Ct;default:return null}}(e);t&&Object(rt.registerPlugin)(t.getId(),{icon:t.getIcon(),render:t})}})),document.addEventListener("DOMContentLoaded",(function(e){"campaign"===wp.data.select("core/editor").getCurrentPostType()&&jt.forEach((function(e){wp.data.subscribe((function(){var t=Et();if(t){var n,a=(e.transform||function(e){return e})(t[e.metaKey]);n=e.cssVariable,Ot.style.getPropertyValue(n)!==a&&(function(e,t){Ot.style.setProperty(e,t)}(e.cssVariable,a),console.log('Set css variable "'.concat(e.cssVariable,'" to "').concat(a,'"')))}}))}))}))},,,,,,,,,,,function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t){e.exports=function(e,t){var n=[],a=!0,i=!1,o=void 0;try{for(var r,l=e[Symbol.iterator]();!(a=(r=l.next()).done)&&(n.push(r.value),!t||n.length!==t);a=!0);}catch(e){i=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(i)throw o}}return n}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}},function(e,t){function n(t,a){return e.exports=n=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},n(t,a)}e.exports=n},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=a=function(e){return n(e)}:e.exports=a=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},a(t)}e.exports=a}]);